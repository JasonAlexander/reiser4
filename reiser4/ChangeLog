2002-03-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/carry_ops.c, /home/CVS/reiser4/fs/reiser4/carry_ops.h, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/treemod.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	even more fixups for inconsistent changes

2002-03-12  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	spelling corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	comment about znode deletion is corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-03-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	and more fixups for useless changes

2002-03-12  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	trying to complete Hans' PBK->CBK renaming

2002-03-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c: FAKE_TREE_ADDR: commented

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/lock.c:
	 - use znode_is_dirty() instead of explicit flag checks
	 - more assertions
	 - znode_contains_key(): comment

2002-03-11  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	end of day commit

2002-03-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c: Fix slum free_space tracking.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Make slum free_space tracking work without znode free_space field,
	free space is now stored in the lock_handle.

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h:
	Move definition of REISER4_DEBUG_MODIFY.

2002-03-11  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/znode.c: responses to Hans' comments

2002-03-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	 - dk lock handling
	 - comment for Josh

2002-03-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.h: Define current_tree properly.

2002-03-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/pool.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	use reiser4_kfree()

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/pool.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tshash.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/debug.c:
	another breakage fixups. Project suicide, eh?

2002-03-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.h: Make it compile for now.

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Some renaming.

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/carry_ops.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/treemod.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Damage control.  This fixes much of what Hans broke.  Add a
	"current_tree" pointer to the context.

2002-03-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	possible answer to Hans question about info_node()

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	more decreases in readability

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: less verbose output

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	 - code made less readable as per Hans request
	 - question about code complexity answered

2002-03-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.h: Fix some comments.

2002-03-11  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	removed more code that Nikita didn't change as he was asked to do months ago.

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	Any time I see code written in a way I told Nikita to change months ago, I am going to just cut it.

2002-03-10  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	*** empty log message ***

2002-03-10  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/symfile.c, /home/CVS/reiser4/fs/reiser4/parser/parser.y, /home/CVS/reiser4/fs/reiser4/plugin/file/invert.c:
	*** empty log message ***

2002-03-10  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	Resolved (I hope) longstanding issue of how to distinguish quoted strings from filenames.

	* /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	*** empty log message ***

2002-03-09  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/carry_ops.c:
	missed assignment to ->restartable is inserted. Thanks, Josh.

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	short-cut implementation of paste (initial implementation for cut):
	avoid carry when it is safe

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	resolve some XXX issues

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	do_pbk_level_xy(): only update active->in_parent if active isn't loaded

	* /home/CVS/reiser4/fs/reiser4/carry_ops.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/carry_ops.c:
	move add_new_znode() to the do_carry.c

	* /home/CVS/reiser4/fs/reiser4/pool.c, /home/CVS/reiser4/fs/reiser4/pool.h:
	move pools into separate file

	* /home/CVS/reiser4/fs/reiser4/carry_ops.c, /home/CVS/reiser4/fs/reiser4/carry_ops.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/treemod.c, /home/CVS/reiser4/fs/reiser4/treemod.h, /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	code cleanup: split do_carry.c into several files

	* /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	debugging output cleanups

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	assertion in znode_contains_key()

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	is_in_slum(): cope with NULL argument

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: MT thread of "nikita dir" test

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	znode_contains_key(): check ld of right neighbor, if any

2002-03-09  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/plugin/file/invert.c, /home/CVS/reiser4/fs/reiser4/plugin/file/symfile.c, /home/CVS/reiser4/fs/reiser4/plugin/name/invterp.c:
	*** empty log message ***

2002-03-08  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/flush.c: Some more outlining of flush.c.

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Comments and one more has_slum() method.

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c: A few comments.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Use znode_has_slum_commit_context() appropriately, rearrange locking a
	bit.

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Rename lock_znode   -> internal_lock_znode
	Rename unlock_znode -> internal_unlock_znode

	These names were confounding various grep searches of mine.

	Use znode_has_slum_lock_context().

	Rearrange lock_object() to satisfy znode_has_slum_lock_context()
	assertions.

	And simplify znode_is_write_locked (formerly _by_me) implementation.

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	There are two different forms of znode_has_slum() so that I could
	write different assertions and use different justification that the
	tree lock is not held merely to test this property.

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	Move a test for (SLUM_BEING_SQUEEZED | SLUM_WAS_SQUEEZED) directly
	into slum_likely_squeezable.  Also delete bunch of dead pseudo-code,
	which has all been implemented for real now.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Work in progress on znode_has_slum() usage, comments.

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Cut some dead code for now -- its getting in the way of my slum
	locking analysis since it isn't current.

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	Change function names.

	* /home/CVS/reiser4/fs/reiser4/znode.c: I'm still working on this.

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Make the previously described changes in lock.c, also use those macros
	wherever possible.

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	Move the "zlock object state macros" out of znode.h, this was error
	prone.  Most of those macros weren't being used outside lock.c, but a
	few were.  The two or three that matter externally are only used in
	assertion context, therefore I made them REISER4_DEBUG conditional:

	- Formerly named "znode_is_locked", now named "znode_is_any_locked",
	  returns true if the lock is held by the current thread.

	- Formerly named "znode_is_write_locked_by_me", now named
	  "znode_is_write_locked", returns true if a write lock is held by the
	  current thread.

	- Function named "znode_is_read_locked", not used externally, would
	  return true if a read lock is held by the current thread.

	The old macros have been moved into lock.c and given names that don't
	conflict with these external names.

	Also some work on progress trying to define exactly how to test
	whether a node is in a slum and what locks are required... unfinished.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Use new tracing for transactions.

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Move znode manipulation outside tree_lock, add a few comments.

	* /home/CVS/reiser4/fs/reiser4/znode.h: Rename a flag.

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Use new tracing stuff.  Move some initialization around in
	balance_slum, work on some comments, and eliminate check_slum -- it
	was never used because slum state is not usually consistent (i.e.,
	because free_space is in flux, nodes are being added to sibling
	list...) -- there are presently assertions in and around all slum
	modifications that do a better job.

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	My simple little mind just doesn't work in hex.  Its so much easier
	this way.

2002-03-07  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/flush.c:
	Outline of a real reiser4_flush_node() function, mostly just comments.

	* /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	Sorry I just over-committed.

	* /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	Ooops!

	* /home/CVS/reiser4/fs/reiser4/defines.h:
	The REISER4_DEBUG_MODIFY slows things down a lot, disable it by default.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	Remove calls to znode_set_dirty() from plugin code, add them to do_carry.

	It may be that we should call this depending on the result code of the
	plugin's modifying method, but I don't know what the return values
	mean exactly so I'll leave that to Nikita.  It seems that it should be
	called whenever restartable is set to zero, and I commented one place
	where I don't see that.

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	Add set_dirty call to znode_init_new.  Add spinlock protection to
	znode state in set_dirty.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Propagate atom flags during fusion (i.e., for forced commit).

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	Add calls to znode_set_dirty() -- this may not be the ideal place to
	make these calls since this is plugin-specific code.  We may instead
	opt to place calls to znode_set_dirty in generic code instead.
	do_carry() is the obvious place, but it is not the only avenue for
	modifications, so I leave this decision up to someone else.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	Implement new znode methods, add calls in lock.c to check pre_write
	and post_write conditions.  And a comment.

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	New function znode_set_dirty() sets the ZNODE_DIRTY flag.

	Add new CPP variable REISER4_DEBUG_MODIFY to detect failure to call
	znode_set_dirty().  Add debug-conditional field to znode for storing a
	checksum, add appropriate #defines and znode_pre_write and
	znode_post_write checks.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/flush.c:
	Add flush.c to the Makefile, make it compile (still empty).

	* /home/CVS/reiser4/fs/reiser4/flush.c:
	Proper indentation of Hans' pseudo-code.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: More issues with least-keys...

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Fix the least-key search-forever issue by never deleting the least key
	in "jmacd build" test.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Make spin lock change requested by Zam, update some comments.

2002-03-07  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-07  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	 - c_count bug hopefully cured: tree traversal didn't take tree spin lock
	   during updated of parent pointer
	 - stricter lock ordering checks
	 - selective debugging output

2002-03-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Fix the (node->zslum->atom == atom) assertion failure.

2002-03-07  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: typo fixed

2002-03-07  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: Answer to Hans question.

2002-03-07  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	*** empty log message ***

2002-03-06  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	passing of wakeup signal to next lock requestor in cases
	of dying znode and try_capture failure.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-03-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c: znode_invariant(): cleanup

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	znode_invariant(): take locks on tree and znode unconditionally

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c:
	move c_count increment

2002-03-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Eliminate uses of spin_try_reverse_lock().  The original design
	assumed that txn_atoms could be allocated and deallocated but never
	freed, so you could hold a spinlock on the atom after your node->atom
	pointer was modified by fusion.  But now we are allocating and freeing
	atoms and so reverse_lock uses are replaced by spin_trylock.  This
	increases the likelyness of busy-waiting for atom fusion (mainly slum
	merging, list splicing) to complete, since the old code would wait on
	the atom spinlock to become available before retrying the operation.
	This issue could be solved by using a long-term lock to wait on atoms
	during fusion, etc.

	Also a memory corruption issue or two due to use-after-free.

	* /home/CVS/reiser4/fs/reiser4/ulevel.h: Nothing.

2002-03-06  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c: do_pbk_cache_search(): locking

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	point cache use tree lock

2002-03-06  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Proper accounting of atom references, proper freeing of atoms when
	they are finished, check in ulevel.c that all atoms are free at the
	end of testing.

2002-03-06  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/dir/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/file/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/item/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/security/.cvsignore, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	 - commented
	 - use regexps in .cvsinore

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: more comments

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: commented

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: remove wrong assert

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c:
	fix bug in c_count update

2002-03-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	txnmgr_force_commit() doesn't work if there are handles open, but I
	had written it before the last REISER4_EXIT, which only worked because
	the "jmacd build" test uses separate thread contexts.

2002-03-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	massive changes including but limited to:
	 - c_count handling
	 - commenting code
	 - synching with Hans changes

2002-03-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/defines.h:
	Create sizeof_array() macro, use it.

2002-03-05  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	*** empty log message ***

2002-03-05  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Implement proper deletion of slums.  Prevent slums from merging while
	they are being squeezed.

	Now (taking all of these commits together), after a ulevel test
	completes the call to txnmgr_force_commit() will commit all existing
	atoms, which uncaptures all captured nodes, which deletes all existing
	slums.  The call to slums_done() checks that all slums are freed and
	so far it appears to be working.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Implement txnmgr_force_commit(), add new txnmgr SPINLOCK_FUNCTIONS,
	add new atom flag so that should_commit() returns true, and prevent
	fused atoms that were discarded from trying to commit (not doing the
	right freeing/accounting yet...).

	* /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Add new txnmgr_force_commit decl, modify txnmgr_begin decl, add new atom
	flag to force commit.

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	Just because the sizeof keyword in C doesn't need surrounding parens,
	I think they should be added anyway.  Reading:

	sizeof x

	is syntactically confusing and I request that you write

	sizeof( x )

	as if it were an ordinary function.

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	txnmgr_begin() is now a void function

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	Found a little memory problem here as well.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	I ran into a problem with memory corruption so I added some debugging
	checks to the kmalloc, kfree, and kmem_cache_* functions.  These
	attempts were futile, as the debugging checks made the problem
	non-reproducable.  I ended up using ElectricFence to find the problem
	instead, but the code might be useful anyways.  Also added a call to
	the new function txnmgr_force_commit() which commits any outstanding
	atoms.  This is called after main() finishes and allows us to check
	that all resources are released.

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	Add a new lock-stat field for the txnmgr spinlock.

2002-03-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	new zstate bit ZNODE_IS_DYING to simplify can_lock_object()
	more stats

2002-03-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Make reiser4_prepare_to_sleep() check nr_signaled and if so return
	-EDEADLK.  This moves around some of the lock code and Zam may
	disagree, but I can't reproduce any more deadlocks now.  I can,
	however, get this:

	<4>reiser4[a.out(3074)]: do_pbk (tree.c:952)[nikita-1385]: WARNING: Too many iterations: 32768

	I ran "a.out jmacd build 2 1000 10000"...  One thread has gotten stuck
	iterating in do_pbk and the other thread continues making progress.

2002-03-05  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Fix the capture_count assertion (fuse wasn't updating it) and fix the
	zput() problem (slum_merge wasn't accounting for the leftmost reference).
	Now single-threaded test "a.out jmacd build 1 10000 10000" passes.

2002-03-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/lock.c:
	lock counter for long term znode locks.
	lock ordering check in reiser4_lock_znode().

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c: comment about MT failures

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	suspicious zrelse() replaced with zput(). Debugging inserted at this
	point, I suspect this is what caused elusive d_count assertions
	in balance_slum()

	* /home/CVS/reiser4/fs/reiser4/tree.c: typo corrected

	* /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	move DEBUG_SLUM to the header

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	statistics about zload()

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	commented. More assertions added

2002-03-04  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	not a lock stack owner should not trust owner->curpri field value.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	lockstack->nr_hipri_requests field is obsolete.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-03-04  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.doc:
	*** empty log message ***

2002-03-04  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	comment added: using of -ENOENT err. code in tree traversal functions.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-03-04  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Update slum->leftmost in delete_node_from_slum.  When an atom
	"uncaptures" its nodes it does so in left-to-right slum order so that
	slum->leftmost is properly maintained.  This is not obviously
	necessary, but it is helping to locate other places where slum
	tracking has gone wild.  A new assertion is failing -- somewhere nodes
	are getting lost.  Next thing tomorrow...

2002-03-04  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	unnecessary ret. code conversion is removed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-03-04  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c: A little thought for Zam.

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Add a DEBUG_SLUM condition to silence output.

2002-03-04  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	add_node_to_slum(): excessive debugging output silenced

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	drop last reference to @frontier

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	update_znode_dkeys(): questionable change. Vladimir has to be consulted.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	lc_rand(): simple reproducible linear-congruential
	pseudo-random number generator. Knuth rules!

	* /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	do_pbk(): print warning if too many iterations. Simple
	exponential decay of warning frequence

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	balance_slum(): handle reference counter for @frontier variable

2002-03-04  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Modify some comments that were lying around.

2002-03-04  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h:
	 - correct locking during batched carry queue flushing in balance_slum()
	 - add more stats for slum squeezing

2002-03-04  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Implement wakeup() for blocked atoms.  Modify
	txnmgr_atom_should_commit() to grow larger atoms, thus stressing
	slum_tracking code better.  Fix slum_merge_neighbor.

2002-03-03  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-03-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: comments about do-carry

2002-03-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Fix a bug in slum_merge -- forgot to update leftmost.

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Eliminate an assertion, its valid.

2002-03-01  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/block_alloc.c, /home/CVS/reiser4/fs/reiser4/block_alloc.h, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	few changes into extent code, extent based read

2002-03-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	ulevel.c: shorter file name

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	node40_shift(): handle empty source node

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	new item plugin method: ->max_name_len()

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c: enable slum balancing code

	* /home/CVS/reiser4/fs/reiser4/reiser4.h:
	re-allow batching in balance_slum()

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	reiser4_max_filename_len(): ask directory item plugin about
	maximal file name size

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	handle case when paste can actually decrease item size

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	updates required by batching: as carry queue is flushed only
	periodically, empty nodes are still in the tree.

2002-03-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Prevent addition to slum belonging to a different atom.

2002-03-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.h: lock ordering

2002-03-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Saner slum free_space tracking.

2002-03-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.c:
	describe what bust_spinlocks() is

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	lock ordering checking

2002-03-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Use the SPINLOCK_FUNCTIONS for spin_lock_reverse_race.

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	The !is_empty_node() seems like a do_carry issue to me...

2002-02-28  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	try_lock_neighbor() was removed due to its wrong handling of -EINVAL
	return code and code duplication. its functionality was in
	lock_neighbor() already.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	warn. about possible source of deadlocks added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-02-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Slums are causing problems, but these workaround them for now.

2002-02-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	lock ordering checks

2002-02-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	Fix bug in try_lock_neighbor.

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Allow Nikita to test...

2002-02-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	znode_contains_key(): handle non-unique keys

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	reiser4_iterate_tree(): correct error found by Vladimir: incorrect detection
	of the end of the node

2002-02-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Some progress on tracking slum free space.  txnmgr_uncapture now removes
	from the slum so that slums disappear when a transaction commits.

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	Release tree_lock in try_lock_neighbor.... I'll let Zam fix this for real.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	The deadlock caused by spinlock ordering is gone -- for now at least.

2002-02-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	allocate_node(): rearrange order of initialization to satisfy znode
	invariants

	* /home/CVS/reiser4/fs/reiser4/znode.c:  - more znode_invariant() calls
	 - d_count < x_count check removed from znode_invariant()---it
	   doesn't make sense

	* /home/CVS/reiser4/fs/reiser4/tree.c: check for node being removed

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	it seems source of "node corrupted, keys are in wrong order"
	failures in multi thread testing was found: point_by_key()
	didn't check that key is still in node after acquiring lock.
	More restarts, less bread!

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: jmacd_test(): typo

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_is_write_locked_by_me(): new debugging function

	* /home/CVS/reiser4/fs/reiser4/tslist.h: add "const"

2002-02-28  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	next requester is waken up only if lock mode is READ_LOCK. comment fixed.

2002-02-27  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Many changes:

	 - txnmgr makes calls to balance slums
	 - lock manager helps track slum free space
	 - etc.

	Problem is -- enough problems still remain that I couldn't commit it
	all without breaking everything, so I've #if 0'd some of it out for
	now so its not actually called.  I hope this commit doesn't cause lots
	of trouble for the rest of you...

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	Add an assertion to node_plugin_by_node().

	* /home/CVS/reiser4/fs/reiser4/ulevel.h: Twiddle.

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Add new FREE_SPACE flag used to track changes in slum free space.

2002-02-27  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	pasting into position 0 update delimiting key only if pasting not after 0-th unit

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	node40_check: initialize point correctly

2002-02-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h:
	take block size from VFS super block

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	set up ->is_name_acceptable() method for directories

	* /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	bug fixing

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tslist.h, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	changed to compile without debugging

	* /home/CVS/reiser4/fs/reiser4/znode.c: initialise dk lock

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	update_znode_dkeys(): handle case when both nodes are empty

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	 - ulevel.c update
	 - znode.h: commentary updated

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/do_carry.c:
	delimiting key locking: new per-tree spin lock "dk" is added.
	Delimiting keys are protected by dk lock.

	Other approaches were considered, like, using tree lock, or
	update delimiting key only if one of the following is true:
	 - znode is write locked by current thread
	 - znode is read locked by current thread, and tree lock is locked
	 - znode is ZNODE_NEW, and so no other thread can have references to it
	Nothing works. Delimiting keys updates are too "chaotic".

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	don't panic if right delimiting key is incorrect: this is fine.

2002-02-27  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c: After discussion w/ Nikita.

	* /home/CVS/reiser4/fs/reiser4/defines.h:
	Add a trylock to SPINLOCK_FUNCTIONS.

	* /home/CVS/reiser4/fs/reiser4/znode.h: Export info_node

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	Encountered a deadlock that I had previously warned about.  Install
	a workaround.  Zam?

2002-02-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	excessive "const"s removed

2002-02-27  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	Observed with ./a.out jmacd build 10 10000 10000 during insert phase:

	_____________2909_____________ thread 2051
	_____________2910_____________ thread 5126
	_____________2911_____________ thread 9226
	_____________2912_____________ thread 3076
	Last key is greater than rdkey
	3........2........1........BLOCKNR 479 FREE_SPACE 108, LEVEL 1, ITEM_NUMBER 8
	3........2........1........LDKEY: (null): (0:0:0:5d60:0)[file name]
	3........2........1........RDKEY: (null): (0:0:0:5d98:0)[file name]
	3........2........1........0: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d60:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 20
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........1: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d68:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 36
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........2: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d70:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 52
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........3: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d78:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 68
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........4: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d80:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 84
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........5: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d88:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 100
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........6: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5d90:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf3f, nlink: 3208641200, size: 3208641264
	3........2........1........	item length: 16, offset: 116
	3........2........1........	data  00: 0c fb 3f bf b0 fa 3f bf f0 fa 3f bf 01 00 00 00
	3........2........1........7: 	item plugin: stat-data (sd:0)
	3........2........1........	item key: (0:0:0:5db0:0)[file name]
	3........2........1........	length 16
	3........2........1........	item: mode: 175414, extmask: bf1f, nlink: 3206544048, size: 3206544112
	3........2........1........	item length: 16, offset: 132
	3........2........1........	data  00: 0c fb 1f bf b0 fa 1f bf f0 fa 1f bf 01 00 00 00
	3........2........1........
	reiser4 panicked cowardly: <0>reiser4[a.out(4101)]: node_check (plugin/node/node.c:166)[vs-273]: node corrupted
	_____________2913_____________ thread 3076
	_____________2914_____________ thread 3076
	_____________2915_____________ thread 6151
	_____________2916_____________ thread 3076
	_____________2917_____________ thread 8201
	Aborted

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	Comment an assertion failure I've witnessed.

	* /home/CVS/reiser4/fs/reiser4/ulevel.h:
	Using POSIX locks helps high-concurrency performance a lot.  As Nikita
	pointed out yesterday, spinlocks suck for high-concurrency ulevel
	testing.  This will give warnings until you update slpc/libkut/kutlock.h

	* /home/CVS/reiser4/fs/reiser4/lock.c: Comment for Zam.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	"jmacd build" test now finishes building the tree and begins a
	concurrent insert/delete test.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Txnmgr now checks slum_likely_squeezable instead of calling squeeze_slum
	unconditionally.

2002-02-27  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	"v4 locking cannot deadlock" proof (in progress).

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-02-26  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	directory bug fixing

	* /home/CVS/reiser4/fs/reiser4/txnmgr.h: questions

	* /home/CVS/reiser4/fs/reiser4/znode.h: lock commented

2002-02-26  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Work on balancing code.  Made an atomic_t out of slum's free_space count,
	but haven't integrated it with the write-lock/unlock as discussed yet.

	* /home/CVS/reiser4/fs/reiser4/lock.c: Some assertions.

2002-02-26  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	->readdir() implementation

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	call item check from node check

	* /home/CVS/reiser4/fs/reiser4/znode.c: answer Josh's question

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	reminder of locking for delimiting keys

2002-02-26  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	Some comments directed towards Zam after my discussion w/ Nikita.

2002-02-26  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c: answer Josh question

2002-02-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/kassign.c: typoes

	* /home/CVS/reiser4/fs/reiser4/kassign.c:
	proposed new key assignment policy for directory entries.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	some additional plumbing in directory code to save several hash calculations

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	move creation/paste "cookie" into reiser4_item_data

2002-02-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Add new spinlock function "is_not_locked" (e.g., spin_znode_is_not_locked,
	spin_tree_is_not_locked, etc), which is the opposite of spin_is_locked.

	The problem is that spin_is_locked can only be used for positive assertions,
	meaning to assert that you hold a lock.  You can't use spin_is_locked to
	check that the lock is not held, because another thread may be holding it
	and that has nothing to do with you.  The error checking spinlock now
	implements is_not_locked to positively assert that your thread does not
	hold a lock.  Add this call in two places in txnmgr.c.

	Remember that you can switch spinlock implementations between real spinlocks,
	pthread mutexes, and error checking spinlocks in ulevel.h.  The "is_not_locked"
	primitive is a no-op (always returns 1) when error checking spinlocks are not
	used.  You can now write this:

		assert ("jmacd", spin_znode_is_locked (node));

	or:

		assert ("jmacd", spin_znode_is_not_locked (node));

	but you cannot write either of these:

		assert ("jmacd", ! spin_znode_is_locked (node));
		assert ("jmacd", ! spin_znode_is_not_locked (node));

	-josh

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	New include directory.

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	Add spin_lock_znode() call to correct an unbalanced unlock.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	Convert to the new error checking spinlocks.  Tell me if you have trouble
	with this implementation.

2002-02-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	comment about insertion point and shifting

	* /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	directory nlink handling

2002-02-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	Undo some of the left-over debugging code while chasing the stray
	spin_unlock.  Still seeing corrupt nodes under multi-threaded testing
	(right delimiting key too high).

2002-02-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c:
	debugging output trimmed

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:  - commented a bit
	 - handle update of item key during paste at the beginning of an item

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	 - node40_check(): more checks
	 - TBD: delimiting keys have to be updated under tree lock.

2002-02-25  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	get rid of compiler warning

2002-02-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/debug.c: Its too much output.

2002-02-22  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: Hans concern addressed

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	call kill hook properly

2002-02-22  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	mostly changes in cut_tree
	readpage method is added to file plugin

2002-02-22  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	find_new_child_ptr() added

2002-02-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.c: The offender!

2002-02-22  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/key.c:
	wrong start indices in keydec(), keyinc() corrected

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: Josh questions answeredy

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	modifications to reiser4_get_parent() so that in can conditionally
	proceed with parent node unconnected. This is needed because pointer to
	the parent can be still missing from the grandparent and so parent is
	still unconnected. But it will be connected at the moment when lock on
	it will be ultimately taken.

	Corresponding changes in carry.

2002-02-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/lock.c:
	Typo, more assertions (to track down these weird spinlock failures).

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	New assertion, new JUNK_FILES addition, and eliminate the SHIFT TO RIGHT
	and SHIFT TO LEFT printings.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Make show_lock_stack print the lock mode, some other debugging changes.

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	It seems I introduced a bug back in 1.50 of this file.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: Nikita answered this.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	Some more comments/questions on do_carry.

	* /home/CVS/reiser4/fs/reiser4/.gdbinit:
	Sorry, I don't like this--can you put it in your homedir?

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	Some debugging the current add_tree_root/deadlock problems, mainly
	just stepping through to learn what happens inside this code...  A
	few questions here and there.  Eliminate printing of "children of node"
	for leaf nodes in print_tree_rec.

2002-02-21  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	Some more multi-threaded testing.  I may have fixed the zrelse()
	instance, but noticing some very strange looking ones having to
	do with assert (spin_znode_is_locked (node)) in a few places.

	So the most common problems are: low-priority deadlock and
	failure in add_new_root, and I suggest we work on those two
	first.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	In addition to the low-priority lock cycle deadlock, I've seen
	at least 5 other kinds of failure, noted here.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/lock.c:
	Question for someone.

	* /home/CVS/reiser4/fs/reiser4/slum_track.c: Unique ids.

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	Add to tree height, since using 128byte blocks.  Debugging in debug.c

2002-02-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	make dot always first directory unit of a file

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c: typo

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: handle overgrown trees

2002-02-21  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c: Correction.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Fix fuse_wait to obey non_blocking request.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Now have a multi-threaded "build znode tree" test, and I am afraid
	to report that it quickly hangs due to some kind of locking trouble
	I imagine...

2002-02-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	consistency checking

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	update_delimiting_key(): call find_child_by_addr() only
	                         if find_child_ptr() fails
	find_child_by_addr(): break loop

2002-02-21  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	Change znode_invariant to print the offending clause.

	* /home/CVS/reiser4/fs/reiser4/key.h: Naming inconsistency?

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Comments in response to Nikita's investigation.

2002-02-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	sema_init(): initialise mutex as locked/unlocked based on @value

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	add_tree_root(): check for overgrown trees

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	move REISER4_MAX_ZTREE_HEIGHT to other defines

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c: error checks

2002-02-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Some work on try_commit, a comment to Nikita, change name of __trans field.

	* /home/CVS/reiser4/fs/reiser4/znode.c: Add an assertion.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Fix the semaphore init routine, add a little test for sleep/wake.  There
	may be starvation issues... but my test isn't very "real".

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/slum.h:
	Change declaration of squeeze_slum.

2002-02-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	code cleanup, comments

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	do_shift(): eat ->shift() result

2002-02-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Eliminate dead flag ZNODE_SYNCHED.

2002-02-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	 - comment about bias handling on twig level
	 - get_child_znode()

2002-02-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	Question regarding free space mgmt -- I wonder because of a similar
	issue regarding slum's free_space mgmt.

2002-02-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c: comment on terminology

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: sources of hatred addressed

2002-02-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	Some comments for Nikita on do_carry().

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Remove some dead code that's been lying around, it was just getting
	in the way.  Start on try_to_commit routine.

2002-02-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.gdbinit: gdb rc file

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	little helpers to work with mmapped back-end

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	trivial mmap backend stub

	* /home/CVS/reiser4/fs/reiser4/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/dir/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/file/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/item/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/node/.cvsignore, /home/CVS/reiser4/fs/reiser4/plugin/security/.cvsignore:
	more files to be ignored

2002-02-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/.cvsignore: CVS file.

	* /home/CVS/reiser4/fs/reiser4/slum_track.c: Make use of is_in_slum().

	* /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Add new function slum_merge_neighbor, called during atom fusion.  This
	function checks the node's siblings for different slums and possibly
	merges them.  merge_slum now picks the smaller of two slums to deallocate
	and updates all of its nodes appropriately.

2002-02-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	message ids

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	update_delimiting_key(): weaken error checking

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level: gproffing

2002-02-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c: After Nikita's comment.

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Update comments in slum_track.c, remove ZNODE_HEAD_OF_SLUM manipulation,
	and reorganize somewhat in this file.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Initialize and splice the new capture level lists.  Still need to address
	slum merging during atom fusion.

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Remove the ZNODE_HEAD_OF_SLUM bit.  It was equivalent to:

	  node == node -> zslum -> leftmost

2002-02-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	yet another last bug (henceforth YALB) in call_shift_hooks()

2002-02-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum.h: Remove the slum_per_level array.

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	Remove the slum_squeeze helpers, not a valid approach with the removal
	of slum_per_level array.

2002-02-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	yet another last bug in shift/cut found and corrected

2002-02-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Replace while non-loop with goto label (less indentation, since the
	last stmt of the loop was a break anyway).  Add calls to zput() for
	neighbors, change ENOMEM handling around.

2002-02-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	bug fixing in cut_or_delete()

2002-02-19  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	extent_mergeable, cleanups

2002-02-18  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-02-18  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c: bug fixing

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	bug fixing in shifting and compressed directory items code

2002-02-18  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	cleanup to node40_cut

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	node40_cut simplyfied

2002-02-18  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Revise add_to_slum: remove znode spin-locking, tree lock is sufficient.

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	Edit and shorten some of Hans comments.  Move pseudo-code to the bottom.
	Revise balancing code: slum_per_level now belongs to the txn_atom, and
	comments (you cannot take a znode spinlock with the tree lock held).
	Still needs work.

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Eliminate ZNODE_IN_SLUM flag, remove slum_per_level initialization.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Move slum_per_level to txn_atom, initialization code.

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c: Re-indent.

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	Remove slum_per_level from reiser4_tree

	* /home/CVS/reiser4/fs/reiser4/slum.h:
	Eliminate two slum flags, rename _delete_from_slum.

	* /home/CVS/reiser4/fs/reiser4/flush.c:
	Shifting some of Hans' comments around.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: Heh heh.

	* /home/CVS/reiser4/fs/reiser4/defines.h: Update a comment.

2002-02-18  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	bug in node40_cut fixed

2002-02-18  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	find_free_space(): take node from insertion point

2002-02-18  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	few fixes, side effect of this commit: blocksize is back to 256, COMPRESSED ITEM is off

2002-02-18  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	update node counters before calling item plugins

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	handle corner case in carry: paste can morph into insert

2002-02-18  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/.build, /home/CVS/reiser4/fs/reiser4/build.h:
	Take auto-generated files out of CVS.

2002-02-15  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.build, /home/CVS/reiser4/fs/reiser4/build.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	bug fixing. block size set to 4K, back.

2002-02-15  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	switch to insert from paste

2002-02-15  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.build, /home/CVS/reiser4/fs/reiser4/build.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	 - ->mergeable() item method
	 - brk takes key as argument

2002-02-15  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:
	Rename _add_to_slum something more sensible, add_node_to_slum.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Work on reintroducing the txnmgr_atom_begin_commit_locked function,
	which has turned my attention to slum processing and the way in which
	pre-commit (alloc&flush) works.

2002-02-15  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	bug fixes

2002-02-15  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/.build, /home/CVS/reiser4/fs/reiser4/build.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	less bugs in read and write

2002-02-14  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.build, /home/CVS/reiser4/fs/reiser4/build.h, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	compressed directory entries: it works more or less

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c:
	bug in directory item expansion corrected. Wonders of bit shuffling.

2002-02-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	Implement some time routines.

	* /home/CVS/reiser4/fs/reiser4/tslist.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Fix a bug in list_splice, debugging atom fusion, a new ulevel test.

2002-02-14  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c: use internal_print()

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	find position in parent by block number, when search by key fails

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	check_tree_pointer(): remove extra locking

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h:
	internal_print()

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c:
	print_node_content(): correctly print hex dump of item data

2002-02-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: Fix some SUSPEND_CONTEXTs.

2002-02-14  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	read in its current state

2002-02-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	Fix the ulevel and vfs_ops code according to the new txnmgr_begin() and
	txnmgr_end() interfaces.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	All the recent changes to txnmgr, including the shrinking of txn_handle
	and the new txnmgr_begin() and txnmgr_end() interfaces.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	Change the REISER4_ENTRY and REISER4_EXIT macros around, the init_context
	function can now fail, and there are separate versions for those functions
	which return pointers (REISER4_ENTRY_PTR and REISER4_EXIT_PTR).  The context
	now automatically begins and ends a transaction handle.  The reiser4_context
	now contains both a txn_handle pointer and a txn_handle object.  The former
	is used throughout the code to allow dynamic handles that span multiple
	system calls.  The object is used to avoid an allocation per system call
	when system-call-spanning handles are not used.  The txn_handle has been
	shrunk to make this acceptable.

	* /home/CVS/reiser4/fs/reiser4/super.h:
	Transaction manager now belongs to super_info_data, not the tree.

	* /home/CVS/reiser4/fs/reiser4/super.c: Avoid some compiler warnings.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Externalize reiser4_get_current_lock_stack().

	* /home/CVS/reiser4/fs/reiser4/forward.h:
	Delete a stub, add forward decl for reiser4_context.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	Add more rules for checking error IDs.

2002-02-14  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/reiser4.h: missed file

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c:
	chose directory item plugin

	* /home/CVS/reiser4/fs/reiser4/debug.h: trace/statistics: commented

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: bug fixing

	* /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h:
	more key assignment functions. Commented

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	point cache re-implemented. More work required.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.h: typo corrected

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	compressed directory item implementation

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h: (re-)commented

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	->fast_insert() commented

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	->init() item method added

2002-02-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	Some comments.

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: Question for Nikita.

2002-02-14  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	init_inode(): set up sd plugin in inode

2002-02-13  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Some debugging, some comments, still #ifdefing out the txnmgr code
	to avoid disrupting other debugging efforts.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	Some debugging, some comments.

	* /home/CVS/reiser4/fs/reiser4/znode.h: Comments added.

2002-02-13  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	comments clarified. Bashing comment of banshee removed (as improper in
	code).

2002-02-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Add the call to txnmgr_try_capture in lock_znode, looks good there
	now.  I've commented out the body of that function because I need
	to debug starting there tomorrow.

2002-02-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.h:
	missed file added

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/item/compressed_de.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	 - unfinished implementation of compresses directory entries
	 - switch to new lh contract: callers initialise/recycle lh

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	_reiser4_sibling_list_insert(): wild spinlock removed

2002-02-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Some consolidation in lock.c.  Eliminate the exposed try_lock
	function and instead change the "pri" argument to accept both
	flags indicating low and high priority as well as "non-blocking".

	This avoids duplicated code (which was already out of sync between
	reiser4_try_lock_znode and reiser4_lock_znode).

	Expose the lock_stack's semaphore for use from within the
	transaction manager.

	Replace a lock-handle re-initialization in lock_znode with an
	assertion instead.

	Fix all the call-sites of reiser4_lock_znode to use the new
	request flags instead of 0 and 1 for priority.

	Fix and comment tree_walk.c regarding these changes.  Zam please
	take a look.

	Write a comment on the naming of ZNODE_HEARD_BANSHEE.

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	Change macros to "static inline" due to marginal increase in
	type-safety and something about gprof.  Actually its less code
	this way since I can use a macro to define them.

2002-02-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	_reiser4_sibling_list_insert(): don't take tree spin lock

2002-02-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	I have made the conventions for taking and releasing spinlocks more
	consistent.  There were inline functions such as reiser4_lock_tree()
	and non-inline functions such as spin_lock_znode().  I think the names
	should reflect that the lock is a spinlock, so I renamed the reiser4_lock_tree
	pair of functions to spin_lock_tree.  Its shorter.  Plus, I removed the
	assertions from these routines, because that seems unnecessary, and I
	removed the statistics collection from spin_lock_znode.  If we're going
	to take lock statistics we should use SGI's lockmeter, which is another
	reason not to make these extern functions.  I've made four sets of
	macros now for each kind of lock: znode, tree, atom, and lock_stack.
	The three macros are spin_lock_XXX, spin_unlock_XXX, and spin_XXX_is_locked().
	I like having the lock call sites named because this lets you search
	for them easily...  Still working with the txn_handle lock.

2002-02-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	 - handle corner case in paste operation
	 - properly clear old root after it was killed

2002-02-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	Get this stuff out of the way.

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	This makes it easier to search for uses of the lock_stack guard.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	A few fixes.

2002-02-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	s/reiserfs/reiser4/g

2002-02-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	message id correction

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	don't put user-level code in kernel files, please

2002-02-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	Fix the deadlock ulevel test after Nikita's new assertions.

2002-02-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	znode invariant checking.
	bug fixing
	twig level handling

2002-02-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tshash.h:
	Comment to Zam on locking & capturing.

2002-02-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	znode_invariant(): invariant checking added

2002-02-11  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Josh's comment is removed after discussion with him.

2002-02-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c: Incr. c_count.

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Eliminate redundent bit.

2002-02-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	answering josh question about parent pointer of root node

2002-02-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c: Question for Nikita.

2002-02-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c: description of znode life-cycle

2002-02-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	A first step towards multi-threaded testing.  The deadlock mechanism
	seems to work.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/lock.c:
	Add support for multi-threaded ulevel tests, write a little
	test of the deadlock mechanism (still incomplete).  Now getting
	crashes in the locking code w/ > 1 thread.

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	bug fixing

2002-02-08  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c: shift fix

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	shift hook, few fixes

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	deallocation of nodes

2002-02-08  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Work on the lock-txnmgr interface, since it changed some of my
	earlier locking assumptions.

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	item kill/shift hooks

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: twig level handling

2002-02-08  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/txnmgr.c:
	Looks like I broke something.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	More constant up-casing, this time to things like LEAF_LEVEL and
	TWIG_LEVEL.  Plus some work on txnmgr interface.

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	bug fixing, debugging stuff

2002-02-08  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	write fix

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	node40_cut carries node removal

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	few fixes

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: duplicate code removed

	* /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	constify reiser4_key here and there

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: kill the root

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: ->cut() debugging

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	dir_file_install(): install method for directories.

2002-02-08  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c: Proper fix.

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	Make assertions into EIO errors.

2002-02-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	prepare_delimiting_keys() rewritten to use correct coord
	manipulation functions

2002-02-08  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	making head lock.c comment up-to-date.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-02-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/tail.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Covert all enumerated constants to upper case!

2002-02-07  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	more bug fixing in carry and locking.
	tree of height 3 created successfully.

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/do_carry.c:
	delimiting keys handling corrected
	bugs in reiser4_get_neighbor() corrected

2002-02-07  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	node40_check

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	print_tree accepts flags now

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	using find_child_ptr instead of in_parent.item_pos

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	print_tree fixed

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	print_tree and print_node_content

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/do_carry.c:
	yesterday Nikita's fix for new root creation
	print_tree_2

2002-02-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: remove over-tight assert

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: bug fixing

2002-02-06  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	binary search corrected

2002-02-06  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/.build: .build added

	* /home/CVS/reiser4/fs/reiser4/build.h: build.h added

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	bug fixing

2002-02-06  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	renew_sibling should connect znode if far_next_coord fails with -ENOENT.
	fixed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-02-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	shift is fixed a bit

2002-02-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h:
	extent_unit_key(): constified

2002-02-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	one more bug in plug_hole fixed

2002-02-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_change_parent(): change prototype

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	znode_guess_plugin(): call reiser4_get_current_super_data() helper

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	- connect_one_side(): pass node->level down to renew_sibling_link()
	- renew_sibling_link(): check return code from far_next_coord()

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	- should_notify_parent(): call prepare_for_update() conditionally
	- call prepare_for_update() where necessary
	- node40_estimate_shift(): check ->b.can_shift existence before calling
	- prepare_for_update(): handle NULL todo queue
	- node40_shift(): move insertion point even if there is nothing to move

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c:
	internal_down_link(): wrong assertion corrected

	* /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c:
	de_add_entry(): sync with changes in do_carry.h

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	 - allocate_znode(): use zload() directly
	 - add secondary dispatch in "nikita" test section

	* /home/CVS/reiser4/fs/reiser4/tree.h: commented

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	 - reiser4_dup_point(): remove extra call to zref()
	 - do_pbk_level_xy(): initialise ->in_parent field,
	   "->between = at_unit" kludge
	 - put_parent(): remove call to zrelse()
	 - prepare_delimiting_keys(): weaken asserts
	 - reiser4_init_context(): break infinite recursion on bootup
	 - find_child_ptr(): simplify assertion
	 - cut_node(): sync with changes in do_carry.h

	* /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h:
	- reiser4_get_current_super_data(): new helper function
	- per-fs trace flags

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	link_object(): cleanup list elements before use (uhh..)

	* /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	reduce size of carry_poll, carry_op

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	 - find_left_neighbor(): typo corrected
	 - do_shift(): correct order of arguments
	 - add_new_znode(): install delimiting keys for new node
	 - add_new_znode(): allow several new nodes to be created
	   on one level
	 - do_{insert|paste}(): reget node from insertion point after
	   shift
	 - update_delimiting_key(): handle absence of left node
	 - do_update(): handle absence of left node

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	statistics gathering macro cleanup

	* /home/CVS/reiser4/fs/reiser4/debug.c:
	 - check_stack() measure stack depth

	* /home/CVS/reiser4/fs/reiser4/coords.c: print_coord(): don't panic

2002-02-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	plug_hole fix

2002-02-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	missing (?) dereference in GET_NODE_BY_DIR() is added

2002-02-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	coord_key_by_coord is removed, extent_write fixes

2002-02-04  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	No -pg, no special pos_in_item for extents, few fixes in extent_write

2002-02-04  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h:
	add implementations of ->fast_insert()

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	->fast_insert() method added

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	fixed prototypes of directory related methods

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c:
	fixed prototypes of directory related methods.

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	move REISER4_MAX_ZTREE_HEIGHT out of there into forward.h

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: errors in _reiser4_lookup():
	 - pass entry to plugin->lookup()
	 - take super-block from parent

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: testing of ->lookup()

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	implement Hans' idea about skipping do_carry() (on insert currently)

	* /home/CVS/reiser4/fs/reiser4/super.h:
	add statictics info into super-block

	* /home/CVS/reiser4/fs/reiser4/super.c:
	_reiser4_get_super_data(): added

	* /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h:
	initialise keys before use

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h:
	code to collect statistics

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/kassign.c, /home/CVS/reiser4/fs/reiser4/kassign.h, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/directory_entry.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	kassign.[hc] added

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dir.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dirs.c:
	new files added

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/hashed_dirs.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/oid.h, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	directories implementation:

	base methods for directory plugin:
	  ->add_entry()
	  ->rem_entry()

	Hashed directories.
	Directory item implementation.
	Handling of hash collisions, collect stats here.
	Degenerate hash for testing: deg_hash

	Object-id map implementation: just counter.

	Key assignment policies: see kassign.[ch]

	Move key out of reiser4 part of inode. Build it
	dynamically when needed.

	More user-level simulation.

	Bug correction during debugging.

	TBD: compress directory entries into one item:
	      + saves 8 bytes per entry
	      - lot of error-prone code to shift data, Hans?

2002-02-02  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	*** empty log message ***

2002-02-02  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	comments, what Josh asked for, added. unbalanced zput() in reiser4_try_lock()
	fixed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-02-01  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	few bugs debugged

2002-02-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h:
	Working on the modified calling interface for block-capture.

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Add comments to lock.c as I prepare add a call to txnmgr_capture_block.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	Add txn_handle to the context structure, add calls to initialize
	and assert proper commitment.

	* /home/CVS/reiser4/fs/reiser4/uabend.c:
	Comment about irritating compiler warning.

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	Comment regarding sloppy coding.

2002-02-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c: integrate point cache into pbk

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	guess plugin of new node by looking at the plugin-id in the
	common node header

2002-02-01  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	few changes made by request after reviewing

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	typo is fixed in extent_set_width

2002-01-31  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	list_remove_clean is used instead of list_remove to better
	znode state tracking.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-31  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	minor fix in get_page

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	extent_write in debugging

2002-01-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	insert_by_coord() added

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: insert_by_key() testing

2002-01-31  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/txnmgr.c, /home/CVS/reiser4/fs/reiser4/txnmgr.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Add a list link to znode, a couple new znode flags, and re-add
	the transaction code.  It compiles but has some problems to
	address.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	Add calls to initialize the txn_mgr.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/tshash.h, /home/CVS/reiser4/fs/reiser4/tslist.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	Add to the Makefile, add a few types, implement POSIX condition
	variables (named kcondvar_t), add tshash and tslist.

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Moving these files up a level.

2002-01-31  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	reiser4_unlock_znode_cond renamed to reiser4_done_lh.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-31  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	fix in extent_write

	* /home/CVS/reiser4/fs/reiser4/block_alloc.c, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	extent are moved to 64 bit base

2002-01-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	 - make for_all_* safe when entries are deleted from list

	* /home/CVS/reiser4/fs/reiser4/key.c:
	print_key(): display fields in planA order, numerically

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	find_child_ptr(): use find_exact bias

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: set up __prog_name

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c:
	internal_down_link(): handle key==NULL

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	node40_lookup(): set up ->between correctly (I believe)

2002-01-31  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	lock_handle argument is added to functions that need to lock/unlock znodes
	(*file_write, insert_new_node, ...)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	reference to lock_handle added as a argument to point_by_key() and
	point_by_hint_and_key() functions to allow them to do proper locking.
	Other functions fixing is in progress.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	added checks for recursive locking.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-31  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	new root almost created

2002-01-30  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	balancing_coord definition is moved to tree.h from coords.h because of
	a cycle in znode/coords type definitions (znode requires tween_coord,
	balancing_coord requires lock_handle from znode.h defined).

2002-01-30  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	errors found during debugging corrected

2002-01-30  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Moving this file to web-site/docs/txn-doc.html

2002-01-30  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	less compile warnings

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	more fixes to cut

2002-01-30  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/key.c:
	print key fields in plana order

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	factor addition of new root into add_new_root()

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c:
	add new file plugin method ->build_flow() to build from
	user-supplied buffer, size, and offset. Provide default implementation:
	common_build_flow().

	* /home/CVS/reiser4/fs/reiser4/tree.h: add ->read_node to the tree

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	 - find_dir_carry(): correct typo
	 - allocate_node(): mark new node as having node plugin installed

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	reiser4_init_tree(): setup ->read_node() method

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	code to test insertion of new nodes during balancing

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: do_rw(): cast offset to __u64

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	zload(): call tree method ->read_node to read node from disk.

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	_list_insert_{before|after}(): call _list_insert_int() with correct args

2002-01-30  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	cut fixed

2002-01-30  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	sd_print(): add cast to suppress warning

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h:
	 - correct comments
	 - add ->length to item header

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c:
	print_node_content(): print mode info

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	correct check in sd_print()

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: testing multiple insertions

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	per-developer testing entry points in ulevel.c

2002-01-30  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Some changes to the second paragraph based on earlier discussion
	between Hans and Chris.

2002-01-30  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	conflicts resolved. Wait for a "scalable testing architecture".

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	prepend KERN_* to output messages

	* /home/CVS/reiser4/fs/reiser4/ulevel.h: KERN_* message levels added

2002-01-30  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	left_item_pos got similar changes

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	coord_correct and right_item_pos are now aware of before_item and after_item

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	coord_between_item is now aware of after_item and before_item

2002-01-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h:
	coord_is_{left|right|ut}most() added

	* /home/CVS/reiser4/fs/reiser4/do_carry.h: duplicate typedef removed

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	prepare_delimiting_keys(), setup_delimiting_keys(): maintain delimiting
	keys during tree traversal.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	add testing of tree lookups with delimiting key maintenance. It works.

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	remove redundant assertion

2002-01-29  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	compilable write

2002-01-29  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Add an txn_atom field to znode, add a comment to tree_walk.

2002-01-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.h: declaration of print_inode()

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	code to debug loading of inode from stat-data (passed)
	and cut (failed)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	 - call get_plugin() in stead of direct array reference
	 - reserve space for read/write in regular files

2002-01-29  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	While browsing through the sources, I observed inconsistent usage of
	the znode_lock_type enumeration.  Sometimes parameters were 'int',
	sometimes named 'lock', other times named 'mode', and sometimes
	'lock_type'.  Looking around, 'mode' seems to be the best name so
	I have replaced znode_lock_type by znode_lock_mode, and renamed
	variables named lock_type to lock_mode, and the IMHO badly named
	'lock' parameter has been named 'mode'.

2002-01-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	extent item operations bound to plugin

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	debugged a bit

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c: change output format

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	s/impossible/warning/g

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	 - excessive checking for is_reiser4_inode() removed
	 - print_inode() added

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: do_rw(): initialise flow key

2002-01-29  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Just because C allows you to name your variables the same as your
	types doesn't mean it should be done.  Those of us with syntax
	highlighting agree...  a variable of type "slum" named "slum" can
	only lead to confusion.

2002-01-29  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/flush.c: *** empty log message ***

2002-01-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: add do_cut() testing

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: doesn't worth commit message

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	add profiling to compiler options

2002-01-29  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/block_alloc.c, /home/CVS/reiser4/fs/reiser4/block_alloc.h, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	extent file write

2002-01-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/reiser4.h:
	REISER4_SEQ_SEARCH_BREAK added

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	unit_key_by_coord(): handle NULL ->unit_key() method

	* /home/CVS/reiser4/fs/reiser4/key.c: corrections to keycmp()

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	smarter intra-node lookup method: use sequential search on small nodes.
	This results in 50% speedup on nodes with 10 or fewer items, which is
	not that uncommon, given our lazy balancing policy.

	* /home/CVS/reiser4/fs/reiser4/ulevel.c:
	rseq_search(), seq_search(), bin_search(), test_search():
	functions to test various key search algorithms

	* /home/CVS/reiser4/fs/reiser4/ulevel.h:
	move <linux/list.h> content here

2002-01-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	reiser4_init_tree(): const-corrected

	* /home/CVS/reiser4/fs/reiser4/reiser4.h:
	macro for node ->lookup() methods

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	add_tree_root(): "fake" znode has level 0

	* /home/CVS/reiser4/fs/reiser4/tree.c:  - s/zunload/zrelse/g
	 - reiser4_init_tree(): const-corrected

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: more testing: pbk

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	get_inode_sd(): assert that pbk did what it claimed

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c: rearrange code

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	node40_lookup(): lookup updated
	node40_print(): suppress warning about unused arg

2002-01-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c:
	Zam convinced me to share the hash_lock and tree_lock, so hash_lock
	is gone now.

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c: Fix typo

	* /home/CVS/reiser4/fs/reiser4/coords.h: Missing const.

2002-01-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	typo in print_coord() corrected

	* /home/CVS/reiser4/fs/reiser4/tree.c: simplify reiser4_init_tree()

	* /home/CVS/reiser4/fs/reiser4/znode.c: correct typo in zget()

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	coord_is_in_node(): corrected once more

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	coord_is_in_node(): check for end of item

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	add reference to sd_print()

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: _do_create(): add casts

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	unused done_carry_node() removed

	* /home/CVS/reiser4/fs/reiser4/coords.h: print_coord() exported

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	print_node(): print znode state symbolically

	* /home/CVS/reiser4/fs/reiser4/coords.c:
	 - last_unit_pos(): fence error
	 - coord_between_items(): simplify conditional
	 - print_coord(): handle NULL znode

2002-01-28  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/flush.c: *** empty log message ***

2002-01-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	s/node_print/print_node_content/g for consistency: we
	have print_*() everywhere.

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	node40_create_new_item(): handle rightmost item properly

2002-01-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/lock.c:
	New and improved zget() code mostly carried from bufmgr/bufmgr.c,
	make for consistent style by jmacd-izing the region, changed
	declaration of zlook to be more like zget (i.e., taking tree and
	level for an assertion), and directing a comment towards zam in
	lock.c.

2002-01-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h:
	constify argument of num_items()

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	print method implemented

	* /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h:
	check_stack() added to check for possible stack overflows

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h:
	more flexible printing methods

2002-01-27  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-25  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	memory address may have more bits than (int) has.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-25  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	*** empty log message ***

2002-01-25  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt: Just a paragraph.

2002-01-25  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	print_node

2002-01-25  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	*** empty log message ***

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c: Fix for Nikita.

2002-01-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	changes required to run do_carry() for the first time

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt: Replies to Hans.

2002-01-25  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	*** empty log message ***

2002-01-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: add_tree_root() added

	* /home/CVS/reiser4/fs/reiser4/znode.c: comment on zget() readjusted

	* /home/CVS/reiser4/fs/reiser4/ulevel.c: slums_init() added

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/znode.c: Work in progress on zget()...

2002-01-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	disk_addr_eq() changes to return true when block numbers
	are identical.

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	consistent use of spin_lock_znode/spin_unlock_znode

2002-01-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	spacing brought back into consistency.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c: missed '}' added

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	single_item() synched with method prototype

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	 - mention batching in comments
	 - find_{left|right}_neighbor()
	 - don't recalculate free space in find_free_space() until
	   necessary

2002-01-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Implement use of ZF_SET, ZF_CLR, ZF_ISSET, and ZF_MASK macros for
	testing znode state flags.  Update source code.  Begin using a
	separate hash table lock from the znode tree lock, work is still
	in progress in znode.c.

2002-01-25  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	remove_sibling_tree is moved to tree_walk.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-24  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-01-24  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c:
	squeezing batching discussed with Hans

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	batch carry processing added to slum_squeezing

2002-01-24  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	insert_unitype_flow cleanuped

2002-01-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	More znode wrangling -- some renaming and comments.

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	A few little corrections.

2002-01-24  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	deadlock prone section of find_left_neighbor() removed

2002-01-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Some minor znode cleanups.

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Eliminate the "struct znode_tree" data structure by placing its
	members directly in the containing reiser4_tree.  Since these two
	structures are 1-to-1, there was no reason for a znode_tree to exist,
	and the pointer from znode_tree to reiser4_tree was redundent.  This
	eliminates a number of places in which a confusing double
	pointer-indirection was required (e.g., X -> tree -> tree).

2002-01-24  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h:
	coord_after_last is added

2002-01-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/lock.c:
	Rename _zget() to zref()

2002-01-24  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	 - only use write locks during carry.
	 - handle case of extents in balancing neighborhood

2002-01-23  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	renew_sibling now checks for non-internal item types (extents on twig
	level).

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-23  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-01-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	compilation reached

	* /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	more VFS stuff to compile

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	tree_level consistently used as a type for
	level arguments/variables

	* /home/CVS/reiser4/fs/reiser4/plugin/hash.c:
	numeric literal explicitly marked as unsigned

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	error in initialization of node_plugins corrected

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c: get_plugin() used

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h:
	references to reiser4_transaction removed

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c: stricter typechecks

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	[icm]_time is properly casted before saving on the disk

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c:
	errors in node40_guess(), node40_init() corrected

2002-01-23  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	extent_unit_key is updated to return either key of coord or key of unit

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	must_lookup_node is added

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	it is more compilable now

2002-01-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	simplify inode locking functions.
	Use down_interruptible() where appropriate.

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	handle NULL child pointer in cop_delete

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/tail.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	cleanup

2002-01-23  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-01-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/do_carry.c:
	reiser4_done_carry_pool() implemented

	* /home/CVS/reiser4/fs/reiser4/do_carry.h: add_new_znode() exported

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	obsolete prototype of do_carry() removed

2002-01-23  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	ninor fixes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	synching makefiles and defines.h with do_carry.[ch]

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/tail.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/oid.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/reiser4_i.h, /home/CVS/reiser4/fs/reiser4/reiser4_sb.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	CVS $Log$
	CVS Revision 1.3  2002/03/12 13:15:03  god
	CVS vfs_ops.c, object.c: make VFS methods to call object plugin in stead of
	CVS doing all the work by themselves.
	CVS record removed

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	s/tree_carry/do_carry/g

	* /home/CVS/reiser4/fs/reiser4/do_carry.c, /home/CVS/reiser4/fs/reiser4/do_carry.h:
	carry's comeback

2002-01-23  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_is_invalid replaced by znode_is_in_tree().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h:
	carry.[ch] removed as management's request

2002-01-23  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	reiser4_sibling_list_insert added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-22  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	tree traversal functions check for fake znodes now.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	1. fake znode for tree root pointer protection is at fake_tree_addr again.
	   do_pbk() fixed.
	2. znode_above_root() that detects fake znode is added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-22  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/cut.c:
	cut.c is removed, its contents is moved to tree.c

	* /home/CVS/reiser4/fs/reiser4/cut.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	working on compilability continues

2002-01-22  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/carry.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	trying to compile

	* /home/CVS/reiser4/fs/reiser4/carry.c:
	 - lock_carry_node_tail() helper added
	 - tree_carry() can be used with optional parameter of queue of
	   already locked nodes
	 - interface of add_new_znode() extended to allow call this
	   function without any carry going on
	 - do_update(): handle case where one of nodes sharing delimiting key is
	   not known

	* /home/CVS/reiser4/fs/reiser4/carry.c:  - use new reiser4_post_carry()
	 - split node allocation into more manageable pieces
	 - handle more cases in find_left_neighbor()

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h:
	more examples of carry usage

	* /home/CVS/reiser4/fs/reiser4/carry.c:
	example of tree_carry() call added for reference

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node40.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/carry.c:
	node plugin code reorganized.

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/cut.c, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/ulevel.c:
	assorted "toward-compilability" changes

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	s/delete_node/deallocate_node/g for consistensy

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	_truncate_object(): truncate logic separated out
	of reiser4_truncate()

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_contains_key(): check whether given key is in znode

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h:
	reiser4_post_carry(): helper function to start carry operation

2002-01-21  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-21  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	returned back to use signals to low-pri processes instead of keeping
	number of unmasling hi-pri requests.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-21  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_shift.c:
	leaf40_shift.c is removed

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h, /home/CVS/reiser4/fs/reiser4/cut.c, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_shift.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	node40 plugin cleanuped

2002-01-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	kernel compilable (not yet linkable)

2002-01-21  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/parser.y, /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	remove old parser.y

2002-01-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	change return types to 'int' to return errors

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/crypt.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	trying to compile

2002-01-21  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser.y:
	Creatd <=, and cured string vs. name ambiguity.

2002-01-20  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	zlock object state check macros names are corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c: function description fix.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-19  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	unneeded functions are removed from lock.c and working draft for
	reiser4_check_deadlock added; typo in znode.h fixed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	proper getting of down link added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	1. sibling_list_remove added.
	2. usage of locking functions corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	minor fixes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-18  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/cut.c, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_shift.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4_i.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	synching interfaces with each other. Moving to the elusive
	goal of compilability.

2002-01-18  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Continue locking code cleanups

2002-01-18  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h:
	between_items is unstaticed

2002-01-18  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	More locking schema cleanups

2002-01-18  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c: made it compilable.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-18  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/coords.h:
	last_item_pos and last_unit_pos

	* /home/CVS/reiser4/fs/reiser4/coords.h: reiser4_unit is removed

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	is_empty_node

2002-01-18  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h:
	functions to debug carry:
	    print_carry()
	    print_op()
	    print_level()

	* /home/CVS/reiser4/fs/reiser4/coords.h: coords.h added

2002-01-18  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	code simplification/re-moduling. not completed yet.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	znode->lock.nr_readers comment corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	remove `watchers': locks provide this functionality already

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	remove `watchers': locks provide the same functionality already

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	->estimate_brk() method added

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/oid.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/slum_track.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	changes to make carry.c compilable

2002-01-17  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/coords.c: not needed removed

2002-01-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	fence error in insert_unitype_flow() corrected

2002-01-17  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_shift.c:
	reiser40_shift

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/coords.c, /home/CVS/reiser4/fs/reiser4/cut.c, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	functions to work coords, shifting code

2002-01-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	errors in new functions corrected

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	print_node(): output delimiting keys

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	simplify point cache, using delimiting keys.

	* /home/CVS/reiser4/fs/reiser4/debug.h: mark trace flags as unsigned

	* /home/CVS/reiser4/fs/reiser4/debug.c:
	s/conditional_schedule/cond_resched/g

2002-01-16  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-16  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	change placement of parent pointer in znode struct.

	* /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h:
	keyinc(), keydec()

2002-01-16  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	prototype for znode_change_parent is added

2002-01-15  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c:
	is_coord_in_node() added

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c:
	stats macros calls synched with changes in debug.h

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	new list methods: *_list_is_clean(), and *_list_clean()

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	left and right delimiting keys in znodes (need discussion)

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	outdated carry structures removed

	* /home/CVS/reiser4/fs/reiser4/reiser4.h: defines for carry.[ch]

	* /home/CVS/reiser4/fs/reiser4/carry.c, /home/CVS/reiser4/fs/reiser4/carry.h, /home/CVS/reiser4/fs/reiser4/defines.h:
	carry operations

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	declaration of stats gathering macros changed

	* /home/CVS/reiser4/fs/reiser4/debug.c: reiser4_preempt_point() added

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	reiser4_preempt_point() added in squeeze_slum()

2002-01-15  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_invalid is not needed anymore, lock.c uses znode_heard_banshee instead.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	recursive write locking implemented.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	forgot to set znode non-locakable while deadlock resolving.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	explanation for using of stack->guard spinlock added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	deadlock detection is separated out from other locking code.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-15  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	Fix loop condition in reiser4_unlock_lock()

2002-01-15  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	dedlock resolving serialization.

2002-01-14  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c: *** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/lock.c:
	More reiser4_lock_lock() cleanups

2002-01-14  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	are_items_mergeable in right place

2002-01-12  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c: Finish reiser4_lock_lock() fixes

2002-01-11  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-11  pooh  <pooh>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Simplify reiser4_unlock_lock()

	* /home/CVS/reiser4/fs/reiser4/lock.c: Simplify reiser4_lock_lock()

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Avoid wake up/requested race condition

2002-01-10  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: daily commit

2002-01-10  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	1. we now use tslist.h for znode lock structures.
	2. lock.c redesigned to work directly with znodes rather lock objects.
	3. ty_lock() implemented.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-09  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

2002-01-09  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	interface of get_neighbor and others is changed; lock handle for
	already locked object is not passed anymore, pointer to znode is used
	instead.

		I accept terms and conditions stated in the Legal Agreement
		(available at http://www.namesys.com/legalese.html)

2002-01-08  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y:
	*** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/parser.c: remove unused file

	* /home/CVS/reiser4/fs/reiser4/parser/parser.y: add parser.y

2002-01-08  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	delete_from_sibling_list implemented

2002-01-07  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser.y: *** empty log message ***

2002-01-05  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	just a small fix: lock mode names reverted back to znode_read_lock, znode_write_lock.

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	point_by_key() corrected to use lock handles. not fully completed yet.

2002-01-04  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	1. reiser4_lock_stack * stack argument was excluded from all lock function
	   prototypes; get_current_stack() is used instead now (internally in lock.c).
	2. znode initialization uses reiser4_init_lock().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2002-01-04  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	New list manipulation functions:
	 * rx_event_list_insert_before    Insert just before given item in the list
	 * rx_event_list_insert_after     Insert just after given item in the list

2002-01-03  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	handling of invalid objects corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	1. commenting of tree_walk.c; minor bugs fixing.
	2. znode_is_connected() added to znode.h
	3. typo fixed in lock.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-31  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	reiser4_get_neighbor is rewritten again. get_neighbor and conect_znode
	are based on one renew_sibling_link() function.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-30  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	tree traversal functions cleaned up and adjusted to new reiser4 types definitions.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	rename lock_inode() to less ambitious reiser4_lock_inode()

	* /home/CVS/reiser4/fs/reiser4/znode.c: cosmetic changes

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	dropping unneeded parameters

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	 - drop transacrashes and journals because of reiser4_context
	 - switch to finer garined locking. Drop BKL where possible.
	   This should be revised carefully.
	 - implement ->unlink(): reiser4_unlink()

2001-12-29  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	last commit in this year - cut_tree (not completed), delete_item, delete_node, cut_item

2001-12-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	comment for znode_watcher is completed

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	tree_change (nee do_carry) ultimately renamed into tree_carry.

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	fruits of reiser4_context: get rid of transcrashes and
	journals in prototypes.

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	add static where appropriate. Keep your namespace tidy.

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	update calls to watchers function that now take znode spinlock
	by themselves

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	znode watchers implementation

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	use REISER4_ENTRY and REISER4_EXIT

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	reiser4_context handling macros: REISER4_ENTRY and REISER4_EXIT

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	commented

2001-12-29  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/tree.h: *** empty log message ***

2001-12-29  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	reiser4_get_right_neighbor's prototype corrected.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-28  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	*** empty log message ***

2001-12-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	more comments

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	reiser4_context handling functions.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	"tags" target added to build TAGS file

2001-12-28  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/tree.c: *** empty log message ***

2001-12-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	comments updated to confirm to Documentation/kernel-doc-nano-HOWTO.txt

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	new functions: zgetlock/zputlock (helpers) and
	zfreespace(), used by balance.c

	* /home/CVS/reiser4/fs/reiser4/ulevel.h: likely/unlikely defined

	* /home/CVS/reiser4/fs/reiser4/uabend.c:
	conflict with (user level) global name resolved

	* /home/CVS/reiser4/fs/reiser4/slum.h: typo corrected

2001-12-27  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/defines.h: tree_walk.h enabled again.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-27  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/tree.c: conflicts resolved in cut_tree

2001-12-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c: wild commit rolled back

2001-12-27  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/balance.c: *** empty log message ***

2001-12-27  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	tree_point2tween_coord

2001-12-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	point->coord conversion (partial)

2001-12-27  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	locking schema with deadlock detection is implemented for znodes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-26  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	we only need znode_right_connected in squeeze_slum()

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	make balance.c and slum_track.c compilable

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	 - znode_free_space() implemented
	 - usage of znode_tree_lock() corrected

2001-12-26  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	the rest of changes made recently
	CVS----------------------------------------------------------------------

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h:
	chaning tree_point to *coord

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h:
	changing tree_point to *coord continues

	* /home/CVS/reiser4/fs/reiser4/forward.h:
	predeclarations of *coord structures

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	few new structures instead of tree_point

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	list of item operations changed recently

2001-12-26  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	rewritten to use new slum_track.c

	* /home/CVS/reiser4/fs/reiser4/slum_track.c:  - commented by Hans
	 - handling of slum_slum_being_squeezed in add_to_slum()
	 - slum_check_delete() renamed into delete_from_slum()

	* /home/CVS/reiser4/fs/reiser4/slum.h:
	 - new slum state: slum_slum_being_squeezed
	 - ->leftmost is now pinned in memory by _zget()
	 - delete_from_slum()/_delete_from_slum(): locking

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	zgetlock()/zputlock() helper functions

	* /home/CVS/reiser4/fs/reiser4/znode.h: beautify bitmask definitions

2001-12-26  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	tree_traversal functions (tree_walk.c) were adjusted to use locking from lock.c.
	locking (lock.c, lock.h) interface was tuned.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-24  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	new version of slum data structure and slum tracking code: track slums
	all the time, dunamically allocate, merge and update slums.

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	 - znode_tree_lock/znode_tree_unlock wrappers implemented and used
	 - assertion checking for ->slum

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	 - clarified znode states related to slum management
	 - simplified slum linkage in znode
	 - locking of slums
	 - znode_tree_lock/znode_tree_unlock---wrappers for taking
	   spinlock on znode tree

	* /home/CVS/reiser4/fs/reiser4/balance.c: additional assert()

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	dummy typedef added at the end of TS_LIST_DEFINE() so that
	it can be terminated with semicolon

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c: comment updated

2001-12-22  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	Only small fixes (style, var. names, comments).

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-22  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	Modifications made during zam seminar with Hans on locking code.

2001-12-22  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	between field initialization in shift_everything_left

2001-12-22  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/tree.c: added comment

2001-12-21  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	zput(node) version which accepts NULL parameter added as ZPUT().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/balance.c:
	draft of super balancing code. Requires review.

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	syntax error corrected

	* /home/CVS/reiser4/fs/reiser4/tree.h: confusing "partial" tree removed

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c: typo corrected

	* /home/CVS/reiser4/fs/reiser4/defines.h: new headers added

	* /home/CVS/reiser4/fs/reiser4/oid.c: missing CVS keyword added

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	support of list of nodes requiring super balancing

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/slum.h, /home/CVS/reiser4/fs/reiser4/slum_track.c:
	slum tracking code

2001-12-21  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/balance.c: shift_everything_left

2001-12-21  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/balance.c: *** empty log message ***

2001-12-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	parameters of reiser4_get_neighbor() are named to match
	comment above.

2001-12-19  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.h: use "unlikely" in assertion

2001-12-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	A few more changes related to Hans' questions.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-18  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	dealing with request queue is corrected (in situaltion when process is
	waken up by a signal)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	code style fix and other minor fixes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-18  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	asked for comments.  Had peculiar conflict in bufmgr.c involving code I think I did not touch.

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c: asked for comments

2001-12-18  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	lock passing implementation.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-17  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Still working on the zero-reference issue following blkcreate and blkcopy.
	The retry code-path for block_capture is broken in this area.

2001-12-17  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c:
	*** empty log message ***

2001-12-16  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree.c:
	do_pbk_level_xy worker routine added.
	that function maintaine web znodes during tree lookups.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	znode_spin_{lock/unlock} addes around add_watcher call.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	get_neighbor() is rewritten in more (I hope) understandable form.
	comments added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-15  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Work on refcount logic, create a putbuf function, reach an understanding
	of the zero-refcount problem I was having (see @@@ comments).

2001-12-14  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	week job commited on friday - it is now much more disassembled than before

2001-12-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Eliminate the aunion_lock field, add handle_lock, now the buffer
	manager and transaction manager share a single spinlock.  Likely
	this is the same lock used for long-term locking as well.  Work
	on bufmgr_replace, blkput, blkcopy issues.

2001-12-13  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c:
	*** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c:
	fixed obvious bugs in shifting pseudocode

	* /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c:
	*** empty log message ***

2001-12-13  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c:
	emacs variables added

2001-12-13  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/tail_item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	*** empty log message ***

2001-12-12  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf40_node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	made more progress on merging items code, ignored case of right merging for now, it looks slightly harder.  Moved leaf40 code into its own file.

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	Please examine how tree_point got butchered into coord and insert_coord

2001-12-12  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	proposal about how to make searching through extent items

2001-12-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c:
	Analyzing current problem spots.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-11  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	bedtime commit, changed point and body_partial_copy

2001-12-11  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	functions for choosing rightmost/leftmost/ nextleft/nextright downlinks
	and restoring downlink position when we go upward are written.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-11  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	more shift_leaf40 pseudocode

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	more comments

2001-12-11  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	1. lookup level procedure _pbk_level_xy was cleaned up and put into tree.c.
	2. typos fixed in znode.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.h:
	+ zlock/zunlock (used by tree_walk.c)
	+ gen. counter to  znode structure;
	+ new state bit definitions.
	- RCS log.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-10  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Work on bufmgr_blkput logic.
	Separate block-delete logic from begin_commit_locked.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-10  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	updated shift_leaf40

2001-12-10  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/dformat.h: typo is fixed

2001-12-09  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/dformat.h:
	cputod8 and d8tocpu are corrected

	* /home/CVS/reiser4/fs/reiser4/dformat.h: d8 is added

2001-12-09  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/znode.h:
	wrote more code.

2001-12-08  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser.y: defunct comment removed

	* /home/CVS/reiser4/fs/reiser4/parser.y: fixed up quoting arguably

2001-12-08  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c, /home/CVS/reiser4/fs/reiser4/tree_walk.h:
	tree_walk.h file added. reiser4 tree traversal functions became more clean.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-07  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c:
	More code reviewed with Mr. Saveliev

	* /home/CVS/reiser4/fs/reiser4/tree.c: comment added

	* /home/CVS/reiser4/fs/reiser4/tree.c: added update_delimiting_key()

	* /home/CVS/reiser4/fs/reiser4/lock.h, /home/CVS/reiser4/fs/reiser4/parser.y, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	*** empty log message ***

2001-12-07  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	some more pseudo code for balancing

2001-12-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Work on txnmgr_atom_begin_commit_locked and the state bits.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h:
	Work on the logic of txnmgr_atom_begin_commit_locked.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-04  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c: compilable file.c

2001-12-04  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Work on bufmgr_blkcopy, read-in-stage-two non-copying, and
	txnmgr_atom_begin_commit_locked.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-12-03  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	attempt to write get_right_neighbor().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-30  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	friday commit - compilable file_write

2001-11-29  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c: 1. commenting/cleanup
	2. connect_znode() added.
	2. traversal tree functions is partially written.

	code still is in uncomleted state.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Work on bufmgr_blkcopy issues, clean up txnmgr_block_capture retry/fail
	logic.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-27  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/tree_walk.c:
	began implementing horisontal tree trasersal functions.
	PBK do_level function is partially written.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-27  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	file_write and extent plugin compiled

2001-11-25  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	comments added; reiser4_unlock corrects nr_readers now

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c:
	Working on txnmgr_block_capture_copy(), uncovered a problem or two
	with the current code, needs more thinking.

2001-11-22  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	more clean implementation without sleep_on_timeout().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-22  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	extent item operations and reiser4_write in current state

2001-11-22  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	answered more questions

2001-11-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	                     Change the protocol for locks held when EAGAIN is
	                     returned in the block_capture code, now all locks
	                     are released.  Place comments regarding long-term
	                     locks in block_capture.  Implement the new
	                     read-mode flags (ATOMIC, NONCOM, MODIFY) using
	                     the state diagram from yesterday, which made the
	                     code much easier to reason about.  Have a Happy
	                     Thanksgiving in Russia or wherever you are.

2001-11-21  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	1. Short-term locking implementation (draft).
	2. process synchronization reimplemented using waitqueues.
	3. `suspicious' code rewritten. Other minor fixes.
	4. $Log$
	4. Revision 1.3  2002/03/12 13:15:03  god
	4. vfs_ops.c, object.c: make VFS methods to call object plugin in stead of
	4. doing all the work by themselves.
	4. removed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-21  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/block-capture.JPG: Add a JPG.

2001-11-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	new tree operation brk_item() and apropriate item
	plugin methods (->cut and ->paste).

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-21  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	*** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	Participated in comment dialogue.

	* /home/CVS/reiser4/fs/reiser4/parser.y: Began editing this file.

2001-11-21  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	ordinary_file_write, extent_insert

2001-11-21  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/block-capture.fm, /home/CVS/reiser4/fs/reiser4/bufmgr/block-capture.pdf, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
			     Create a state diagram for block_capture, this is
	                     a big improvement over the informal list of rules
	                     we had given in the design document.  With
	                     Erika's help, I created a nice diagram to help
	                     organize this information.  Posted a copy of the
	                     new design-doc text for "DEFINITION OF ATOMICITY"
	                     and the new diagram to generate discussion.

2001-11-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	get_point_key() added. Needed for file write. Callers updated.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-20  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	extent plugin initialization added

2001-11-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	random musings.

2001-11-19  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	`lock priority' is changed to be an attribute of lockstack object (or current
	lock request). Other minor fixes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-18  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/lock.h:
	r/w locking implementation. it is not smp-ready.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-16  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/balance.c:
	friday commit

2001-11-16  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	assertions in default_is_in_item() are made more stringent: check
	that "in_node" param is really inside node

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	->is_in_item() declared. Default implementation supplied.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-15  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	get_node_plugin returns reiser4_plugin, not reiser4_node_plugin

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	get_node_plugin added

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	is_point_correct added

2001-11-13  zam  <zam>

	* /home/CVS/reiser4/fs/reiser4/lock.h:
	prototypes of top-level locking functions and data types. draft.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-09  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	reiser4_file_write is disqualified

2001-11-08  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y: 2 week work done

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-08  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	file_write in its current state

2001-11-08  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c:
	node corruption should not lead to panic().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/reiser4.h:
	std_lookup() now handles different ways to update delimiting
	key in a parent.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-07  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c:
	synched with changes in plugin/node/node.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	->max_key_inside() method interface and implementations changed
	(optimization: pass pointer to key and return pointer to key so that
	implementations returning constant can avoid key copying).

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	common_file_owns_item() corrected to check that point
	points inside node

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	synched with changes in plugin/node/node.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	 - error handling corrected slightly in reiser4_lookup()
	 - names of variables colliding with type name (flow) changed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.h: spurious blank line removed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c: typo fixed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	new file plugin methods required for file write:
	->owns_item() and ->item_plugin_at()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Version 8, finished!

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-06  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Merge with Hans, still some chunks that need to be edited.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-05  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	extensive revisions

2001-11-02  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Version 8: Posted Nov 2, 2001: Abstract the bits about a list of old
	relocate blocks in the commit record to the "deallocate set", which
	can be a list, bitmap, or use extents.  The "deallocate set" includes
	the old relocate set as well as blocks deleted by the atom.  Introduce
	the term "repossession" to describe the process of transferring
	responsibility for deallocation to another stage-one atom.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Version 8 in progress.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-11-01  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	reindented. Names of arguments coinciding with type names replaced.
	(It looks like older version in this file was somehow forced into
	repository.)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	pseudo-code marked as such

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	reference to obsolete base.c removed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.h: keycmp() removed.
	Assertion added in set_key_*().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	keycpy() removed and replaced with direct structs assignments

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c: comments added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h: "const"s added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	remove references to temporary stub declarations from
	io.h and journal.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level:
	change `dep' to omit dependencies on system headers

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.c:  - dead pseudo-code removed
	 - keycmp() cleanup

2001-11-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Oct 31 design-doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	correct typos

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/key.c:
	rewritten. Key is represented as array of three 64bit ints.
	Fields are stuffed/extracted through bitmask manipulations.
	This all is to implement time-critical keycmp() function more
	efficiently.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-31  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Transaction design work.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-30  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/parser.y:
	fixed misunderstandings in Demidov's comments in parser.y, refined key definition

2001-10-30  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Yesterday's work on design-doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-28  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Still having CVS hangs.... hmmm.  Just a few notes to myself
	in design-doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Work on design document.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-25  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/key.h: Changed comments.

	* /home/CVS/reiser4/fs/reiser4/key.h: *** empty log message ***

2001-10-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.c: Answer Hans' concerns.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/forward.h:
	removed right_slant_bias completely

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Working on copy-on-capture interface (txnmgr_block_capture), thinking
	about race conditions and the need for a read-write lock in
	txnmgr_block_capture(), the bufmgr_blkcopy function which does the
	actual copying.

	An interface change for txnmgr_block_capture needed so that it can
	call bufmgr_blkget directly--this partly solve the above-mentioned
	race.  Still thinking on whether two spinlocks are better than one
	here, fixes to bufmgr_blkget to deal with new ZFLAG_COPYING flag.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Documenting & thinking about a race condition, ZFLAG_WRITEOUT for
	txnmgr_atom_block_flush, working on copy-on-steal.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Version 4 of design-doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Work on design doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-19  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y:

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-19  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	added pseudo-code explaining desired file write structure

2001-10-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt:
	Work on design document, incorporate Hans' replies.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-18  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Add some content to design-doc regarding the possibility of deadlock
	when in the ASTAGE_CAPTURE_WAIT (when blocking fusion of an aging
	atom ready for commit).  A CAPTURE_WAIT atom can fuse with another
	atom, this is necessary to make forward progress.  This involves a
	new waiting mechanism that allows a handle to wait for either of
	two events: (1) until the atom closes (so it can copy the page it
	is waitinf for) or (2) until its own atom enters the CAPTURE_WAIT
	state, in which case it should proceed and cause fusion to occur,
	thus preventing deadlock.

	Implement this new scheme.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-18  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	Trivial changes in extent.c

	* /home/CVS/reiser4/fs/reiser4/key.h:
	Last version to have less than 64 bit oids.

	* /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h:
	*** empty log message ***

2001-10-17  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Minor edits and revision of version 3 design doc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/design-doc.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Design document version 3.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt:
	Incorporate Hans' comments.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-16  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Some coding related to the new 3-phase design.  These changes back
	out a bit of the 4-phase work, but not very much.  Tomorrow I will
	begin on flushing in phase 1.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt:
	Add revision history.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt:
	Some revisions of txn_phases.txt based on discussion with Hans last night.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-16  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y:

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-15  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	A bunch of coding--now I need to think about Hans new designs.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Working on txn_phases, writing some thoughts on copy-on-capture in
	txnmgr.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-14  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txn_phases.txt, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Some renaming according to Hans' wishes.  fixcount->refcount, bm_frame->
	znode.  Writing of the txn_phases.txt document.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/journal.c, /home/CVS/reiser4/fs/reiser4/journal.h:
	Delete some stuff at Hans' request.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-14  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/io.c, /home/CVS/reiser4/fs/reiser4/io.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	It really annoys me when you add layers of abstraction without bothering to have a seminar first.

2001-10-12  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Working on txnmgr_atom_commit, txnmgr_page_create, bufmgr_blkcreate,
	and wait_queue sleep/wake stuff.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c:
	Finish re-working the txnmgr/bufmgr/scheduler interface.  testbm1 is
	now a multi-threaded test, and the txnmgr and bufmgr are using sleep_on-
	and wake_up-like interfaces.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-11  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.c, /home/CVS/reiser4/fs/reiser4/bufmgr/freemap.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	A bunch of work--see my daily report.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-11  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/io.c, /home/CVS/reiser4/fs/reiser4/journal.c, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/oid.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/uabend.c, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	message-ids are added to nikita's assertions, warnings etc.:
	Summary for user nikita:
	Found 463 unique error IDs
	Found 0 duplicate error IDs
	Found 0 assertions without error IDs
	Max error ID is 749

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-10  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	*** empty log message ***

2001-10-10  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	Logmgr, general cleanup, etc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-09  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c:
	Some more commenting in logmgr.h about the issues facing log &
	transaction management.  How to track the "minover" set and how
	to deal with fresh blocks: they have neither "wandered" or "true"
	block addresses until the txn_atom closes, at least by current
	arguments.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Add a "closed" flag to txn_atom, indicating that an atom should
	not accept any new txn_handles.  This also should prevent "fusion"
	with that atom until it has completed its commit, but this also
	restricts what kind of page_capture actions are possible (because
	if other atoms begin waiting, the closing atom cannot itself wait
	without the potential for deadlock).  I think the simplest solution
	is to prevent fusion of closed atoms, to have other atoms wait, and
	to restrict post-closing actions (balance/flush) to ignore already-
	captured pages of another atom.  I need to run this by Hans.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-08  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Enter some notes from today's discussion with Hans, defining what
	is meant by "atom", "handle", "transcrash", "transaction", "preserve"
	set, "minover" set, "optover" set, the basic approach to bitmap
	handling, and the set_journal_block interface.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-08  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/syntax.alg, /home/CVS/reiser4/fs/reiser4/wander.c:
	unfinished work on syntax, stuff in wander.c must be finished by josh pursuant to discussion.

2001-10-07  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/logmgr.h:
	Addition of a new file "logmgr.h".

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Finish a few missing functions of the txnmgr interface.  This is
	sufficiently complete for me to move on now.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Finish the logic for txnmgr_page_lock in the cases where the page
	has not already become involved in a transaction.  This means checking
	lock mode, then either assigning page to previously-assigned handle
	or else picking a new atom for both to be assigned.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	friday commit

2001-10-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Basic transaction "fusion" operation is implemented along with
	txnmgr_page_lock().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-05  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/io.h, /home/CVS/reiser4/fs/reiser4/journal.c, /home/CVS/reiser4/fs/reiser4/journal.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/oid.h, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	corrections after compilation in user-level with stricter
	compiler checks.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/io.c: file to hold io-related functions

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/oid.c:
	file to hold object-id manipulation functions

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/tail.c:
	implemenation of trivial tail policy plugins: never keep tails
	and always keep tails. More sophisticated policies are yet to be
	discussed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/internal.c, /home/CVS/reiser4/fs/reiser4/plugin/item/internal.h:
	implementation of (trivial) methods of internal item plugin:
	->down_link() and ->has_pointer_to()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/uabend.c:
	user-level crash analysis tools: print sensible back-trace,
	dump core or attach debugger.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/Makefile.user-level, /home/CVS/reiser4/fs/reiser4/ulevel.c, /home/CVS/reiser4/fs/reiser4/ulevel.h:
	files to support user-level compilation of reiser4

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-05  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/dead.code, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c:
	Yesterday's work.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-03  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c:
	Begin using the assert ("jmacd-N", ) macro, continue developing
	basic transaction initialization routines.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-02  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c:
	More case changes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	Downcase all type names.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Use lower-case type names in tshash and tslist, eliminate the
	#defines and add an extra argument to the four macros.


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	New documentation for tslist.h.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-10-02  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h:
	do_overwrite and extent_overwrite are uptodate

2001-10-01  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h:
	Nikita's requested change to tshash.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h:
	Add memory-initialization according to Nikita's wish.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-30  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h:
	Some more work on txnmgr.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-29  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/txnmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	Addition of initial txnmgr.{c,h} files with a few of the core
	data structures and fields in place.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/Makefile, /home/CVS/reiser4/fs/reiser4/debug.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/journal.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/oid.h, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/hash.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.c, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/reiser4_i.h, /home/CVS/reiser4/fs/reiser4/reiser4_sb.h, /home/CVS/reiser4/fs/reiser4/super.c, /home/CVS/reiser4/fs/reiser4/super.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Du cote de chez Compilation:
	  debug.c, tree.c, znode.c, vfs_ops.c, key.c, inode.c, super.c,
	  plugin/plugin.c, plugin/item/item.c, plugin/item/static_stat.c,
	  plugin/object.c, plugin/node/node.c, plugin/file/file.c, plugin/hash.c


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-27  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h:
	Successfully ported the buffer hash tabl to new tshash.h.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/defines.h, /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/forward.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/inode.h, /home/CVS/reiser4/fs/reiser4/io.h, /home/CVS/reiser4/fs/reiser4/key.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	moving toward compilability. Please hold on.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-27  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/testts2.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tshash.h:
	Add new generic hash class.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	The first bufmgr test is basically working.  Its not a very good
	workload simulation yet, but it drives the basic code paths for
	now.  There is a lot I would like to experiment with in this area
	but I shouldn't dwell on this stuff yet.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-26  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	Finish the skeleton iosched logic to return events through
	sinks to the simulator.  Its a complete test now, but it
	has bugs for me to work on tomorrow.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	A little more list work.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testts1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/tslist.h:
	As I began working on the LRU replacement code, my frustration with
	with <linux/list.h> class reached a threshold and I decided I could
	not tolerate the level of type-unsafety present in that list
	interface.  Some may disagree with my approach, but I view it as
	laziness to allow such unsafety to exist.  The problem is that "struct
	list_head" is used as two different object types: as a list sentinel
	(i.e., linked into a the circular list, but not a member of the set)
	and as a list link (i.e., embedded in the object).  As a result,
	functions like list_add() take two arguments of the same type even
	though one must be the head and one must be the link of an object.
	This leaves too much room for error.  I wrote a type-safe version of
	the circular linked list using CPP trickery to allow defining multiple
	list classes with distinct types--the compiler will warn of any type
	errors.  The code is in tslist.h and a test/demo in testts1.c.  I have
	updated the bufmgr & related code to use the new lists (there are 4
	distinct list classes used so far) and I immediately discovered the
	first bug due to strong typing.  Type safety is VERY important!

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-25  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	Work on the first bufmgr test, work on Zipf distributions.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/testzipf1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.c, /home/CVS/reiser4/fs/reiser4/bufmgr/zipf.h:
	I have implemented a set of routines for calculating an using
	Zipf distributions, also a permuted distribution.  The routine
	for looking up the item with a certain probability is based on
	the skip list, which adds a function named slpc_search_lub to
	find the lowest key greater than the search key.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-25  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	cut out unnecessarily complex abstractions from plugin infrastructure.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: unify "sec"/"perm" usage

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	pbk_cache_*() update

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-24  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h:
	More work on bufmgr.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.c, /home/CVS/reiser4/fs/reiser4/bufmgr/iosched.h, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/sinkmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c, /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile:
	Continuing work on buffer manager.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-22  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c:
	I am working on infrastructure necessary to test the wandering
	log buffer manager.  This commit adds part of an event-passing
	mechanism to simulate/test a scheduler that requires waiting for
	I/O to complete.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-21  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/tree.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	friday's commit

2001-09-21  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y:

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-20  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c:
	A bit of work today...

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-20  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y:

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h:
	implementation of standard node layout
	(no compression, no encryption etc.)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	call get_disk_plugin() in get_plugin() stead
	(to convert from disk to cpu byte order)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	skeleton definition of static_stat item plugin

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	 . use reiser4_tree_point as argument where logical
	 . add ->lookup() method called by node lookup

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	remove reiser4_node_plugin typedef (it's not in node/node.h)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c: calls to [un]pack_item

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.h:  . comments added
	 . use atomic_t for reference counters

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.c:
	 . use atomic_t for znode reference counters
	 . znode_is_child_of() added
	 . znode_lock_parent() added
	 . znode_{add|remove}_watcher() added
	 . print_node()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.c:  . typos in comments
	 . description of locking corrected
	 . call pack_item from reiser4_done_point()
	 . [un]pack_item() added
	 . pbk_cache_*() functions
	 . added stop_level and lock_level to point_by_key()
	 . framework for balancing (carry_* functions)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.h:  . support for [un]pack_item
	 . typo in delete_item's declaration

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:  . calls to [un]pack_item added
	 . switch to print_key() function

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	 . print task->comm in debug messages
	 . more trace bits

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c:
	Touchup.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h:
	Finish the bufmgr_pagefix function to my satisfaction.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-19  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y:

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-19  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c:
	Write the first part of the buffer-cache miss logic.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-18  jmacd  <jmacd>

	* /home/CVS/reiser4/fs/reiser4/bufmgr/Makefile, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.c, /home/CVS/reiser4/fs/reiser4/bufmgr/bufmgr.h, /home/CVS/reiser4/fs/reiser4/bufmgr/testbm1.c:
	Today I started writing new buffer manager code.  Here it is.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-14  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	reiser4_file_write is full of non-completed things

2001-09-13  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	lock_level parameter added to call to point_by_key

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-12  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y: semantic for exampl

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-12  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.h: . commented
	. ->data_loaded added in reiser4_tree_point to keep track of
	  calls to zload()
	. lock_level argument added to point_by_key to support twig-levels
	. argument list of insert_by_key changed
	. pbk_cache_* functions and data-types
	. data-structures for balancing: carry_tree_op and carry_tree_node

2001-09-11  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	s did not get into previous commit due to being in unsaved emacs buffers

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/direct.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	extent_overwrite - draftly completed, extent_append - in the middle of way

2001-09-10  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	move item operations called by balancing into special
	sub-struct ".b" inside item_ops

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-09  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	stat-data item plugin methods moved into
	fs/reiser4/plugin/item/static_stat.h:sd_ops

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	plugin_sd_save(): num_of_plugins initialised

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	get rid of unsigned

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:  . get rid of unsigned
	 . synched with changed in headers

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: get rid of unsigned

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	tree traversal implemented.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/journal.h: get rid of unsigned

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	 . reiser4_iget() reindented to fit with the rest of the file.
	 . inode locking based on spin-lock in address_space added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h:
	references to disk map removed (they'll be back I hope)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/debug.h: tracing "facility" added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/znode.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	implementation of functions to manipulate znodes

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-07  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/search.c, /home/CVS/reiser4/fs/reiser4/tree.h:
	*** empty log message ***

2001-09-07  vova  <vova>

	* /home/CVS/reiser4/fs/reiser4/parser.y: rename parser.c to parser.y

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-07  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.h, /home/CVS/reiser4/fs/reiser4/plugin/item/item.h, /home/CVS/reiser4/fs/reiser4/tree.h:
	reiser4_file_write became more plugin based. extent.h contains list of operations specific to items of extent type

2001-09-06  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/item/extent.c:
	reiser4_ordinary_file_write started

2001-09-06  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_i.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_sb.h, /home/CVS/reiser4/fs/reiser4/reiser4_i.h, /home/CVS/reiser4/fs/reiser4/reiser4_sb.h:
	Removed unnecessary fs letters.

	* /home/CVS/reiser4/fs/reiser4/parser.c:
	Got tired of asking nikita to move these files to the plugin directory.

2001-09-05  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/parser.c:
	Advanced things a little, but progress is slow.

2001-09-05  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/tree.h: pos_in_item unioned

2001-09-04  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	reiser4_iget(): return inode locked

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	sync locking in reiser4_lookup() with changes in reiser4_iget()

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: s/reserve/reserve_rw

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	on-disk representation of plugin state simplified

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	more convenient item_plugin[] declaration.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h: ->state_guard semaphore

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	[un]lock_inode_state(): finer grained locking when changing
	inode's plugins or plugin's state

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	use finer grained locking when working with sd: lock_inode()
	vs. lock_inode_state()
	s/.save/.save_sd

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-09-03  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/journal.h, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	I would like a lighter weight less complex plugin infrastructure.  Let us start from specific plugins, decide what they need, then generalize the specific into the general, rather than first creating a general mechanism.

2001-09-03  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	->save()/->save_sd()---Hans proposal
	->activate(): remove uneeded parameters
	->store()/->save() in reiser4_plugin_ops for uniformity
	->save_len() in reiser4_plugin_ops

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	 . bit of commenting
	 . take alignment into account when calculating size of sd

2001-09-03  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/key_ops.c: Duplicative of key.c

2001-08-31  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	*** empty log message ***

2001-08-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	comment for inherit_if_nil()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c: a bit on inode locking

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-31  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c: changed a comment

2001-08-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	move comments to definitions

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	move comments to the definitions of functions

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	remove enum, duplicated from item.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	use brk_item() from tree.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.h: add declaration of brk_item()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	extraneous alignment removed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/parser.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	Hans' comment about sys_reiser4() syntax is moved into parser.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	synced with changes in item operations in
	fs/reiser4/plugin/item/item.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-31  vs  <vs>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	nr_units op is moved to generic set of item operations, union of item specific item ops is changed a bit

2001-08-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/debug.h: commented.
	cassert() added.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	references to M. Jackson removed.
	s/sec/perm/g

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-31  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	*** empty log message ***

2001-08-31  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/parser.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	move comments about reiser4() syscall into parser.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-31  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	I ask some questions about terminology.

2001-08-29  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/base.c: renamed to plugin.c

	* /home/CVS/reiser4/fs/reiser4/plugin/base.c:
	We need to clean up code before writing more.

2001-08-29  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	reiser4_plugin_slot and reiser4_plugin_stat: on-disk data for
	non-standard plugins

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c: code cleanup

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	guess_plugin_by_mode() added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	setup_inode_ops(): make_bad_inode() for inode with wrong i_mode bits

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	 . code cleanup
	 . loading of non-standard plugins
	 . alignment of stat-data parts

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	new methods in generic plugin ops and file plugin ops

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-28  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.c:
	ordinary_file_install() added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h: saner argument lists

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	 . we can read and save stat-datas now
	 . plugins' definitions in file_plugins[] are detailed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	define macros and several helper functions to make code more compact

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	function argument lists are becaming more reasonable once
	we start use them

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	move code from here to there to factor out common functionality

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h: parameter-lists cleanup

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/tree.h: get_item_*() functions added

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	use get_item_*() functions from fs/reiser4/tree.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	s/transaction/transcrash/g

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-27  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: added reiser4_link()
	use reiser4_inode_flags()
	avoid unlikely race in do_create() see comment

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	more methods in object plugin
	more reiser4-specific inode flags

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	added reiser4_inode_flags(): wrapper to access reiser4-specific inode
	flags

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	use reiser4_inode_flags() to access reiser4-specific inode flags,
	rather accessing inode fields directly

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.h: changed a bit to look more like C

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	option for per-inode locking (taking i_sem) during reiser4_iget()
	small cleanup

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	replace BKL with inode lock (see comments in lock_inode())

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: stub for reiser4_statfs()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	add security checks into reiser4_lookup() and do_create()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: do_create():
	 check that name is acceptable
	 only close transaction if it were open


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	declarations of ->is_name_acceptable() and ->lookup() corrected

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c: is_reiser4_inode() added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/journal.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	extra indirection from journal to journal_operations removed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	"trap" points added into VFS ops: do_create, do_rw and reiser4_lookup, so
	that plugins that want to implement transaction policy of their own can
	completely handle interaction with vfs functions.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-26  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/base.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/balance.c, /home/CVS/reiser4/fs/reiser4/debug.h, /home/CVS/reiser4/fs/reiser4/flush.c, /home/CVS/reiser4/fs/reiser4/inode.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/lock.c, /home/CVS/reiser4/fs/reiser4/znode.h:
	Contains less cruft, but still lots of cruft, Nikita, you have things in here that you agreed to change but have not.

2001-08-24  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	a bit of cleanup

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	more methods in file plugin and more state for it

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	_reiser4_get_object_plugin()---version of
	reiser4_get_object_plugin() with weaker checks, used
	when initialising inode

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c: remove static from init_inode()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: . reiser4_lookup()
	. reiser4_create()
	. reiser4_mkdir()
	. reiser4_symlink()
	. reiser4_mknod()
	. lookup_pseudo() (stub)
	. do_create()


	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	reiser4_lookup() wrapper added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	veriable size stat-data support

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.h:
	reindented to conform to the rest of the code.
	Declaration of item_plugins[] added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	more fields in object plugin state: flags, bytes, extmask.
	stat-data plugins

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	use fallback read/write methods if plugin doesn't provide them

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	initialisation of inode fields from stat-data moved to static_stat.c
	use point_by_key()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h:
	stat-data layout moved to plugin/item/static_stat.h

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/item.c:
	definition of item_plugins[] array

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.c:
	implementation of stat-data item non-balancing methods

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-23  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/tree.h:
	initial set of tree operations for upper levels of code:
	point_by_key() (nee search_by_key())
	delete_item()
	cut_from_item()
	insert_by_key()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-22  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/key.h:
	I don't remember.

2001-08-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	check for failure to start new transaction in do_rw()

	* /home/CVS/reiser4/fs/reiser4/dformat.h:
	times stored in 32bit fields. Add "bytes" field to stat-datay

2001-08-21  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/reiser4.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_defs.h:
	renamed it.

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	*** empty log message ***

	* /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	Cleaned it a bit.

	* /home/CVS/reiser4/fs/reiser4/plugin/dir/dir.c, /home/CVS/reiser4/fs/reiser4/plugin/item/static_stat.h:
	Created stat data item.

	* /home/CVS/reiser4/fs/reiser4/key.h: Modified key assignment union.

2001-08-21  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/inode.c:
	inode.c: inode-related functions: init_inode(), init_inode_plugins(),
	  get_inode_key(), get_inode_sd_key(), do_read_inode(), reiser4_iget().

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h:
	format of stat-data and plugin-slots

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/journal.h:
	comment about debugging in ->begin()

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c: ->read_inode*() methods

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c: EXPORT_SYMBOLs removed

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-21  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/reiser4_fs_defs.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_i.h:
	reiser4 is called reiser4, not reiser4_fs.  No unnecessary FS usage, and the fs_fs was really unreasonable....

	This is by user request by the way....

	* /home/CVS/reiser4/fs/reiser4/key.h:
	I begin to understand exactly how to handle attribute storage.  Turns out to be exactly what I had said in the roadmap, but some details of key assignment required much figuring.

2001-08-20  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	more methods in reiser4_file_plugin

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	plugin type methods and function commented

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	don't start transaction in do_rw() in plugin doesn't want to

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h: typo corrected

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/journal.h:
	journal.h: stubs for journal data structures (page based journal)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/vfs_ops.c:
	vfs_ops: interface to VFS, generic reiser4 functions that will
	be installed into {inode|file|address_space|}_operations for our
	inodes.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c: Hans' concerns answered

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/dformat.h: comment about bitmap layout

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/key.h: tunable key layout prototype

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-17  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/dformat.h, /home/CVS/reiser4/fs/reiser4/key.h:
	asked a question

2001-08-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/dformat.h: dformat.h created.
	disk byte-order datatypes and functions
	diskmap datatypes

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-17  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/plugin/object.c:
	Raised questions about creat syntax without answering them.

2001-08-17  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/file/file.h, /home/CVS/reiser4/fs/reiser4/plugin/object.c, /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	continuing with basic plugin things.
	fs/reiser4/plugin/object.c for functions shared by all object plugins:
	file, directory, symlink, etc.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-17  Hans Reiser  <reiser>

	* /home/CVS/reiser4/fs/reiser4/crypt.c, /home/CVS/reiser4/fs/reiser4/key.h, /home/CVS/reiser4/fs/reiser4/plugin/base.c, /home/CVS/reiser4/fs/reiser4/plugin/file/file.c, /home/CVS/reiser4/fs/reiser4/tree.c:
	*** empty log message ***

2001-08-16  Nikita Danilov  <god>

	* /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	node/node.h does exists now

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/branch.c, /home/CVS/reiser4/fs/reiser4/plugin/node/leaf.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.c, /home/CVS/reiser4/fs/reiser4/plugin/node/node.h, /home/CVS/reiser4/fs/reiser4/plugin/node/twig.c:
	node/ directory moved into plugin/

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h:
	 * plugin/types.h: super block plugins removed
	(use root directory	as per Hans suggestion).

	 * plugin/plugin.c: assertions labeled

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/ChangeLog: changelog is changelog

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/debug.h:
	"label" parameter removed from macros that should do direct output
	without any preprocessing (like printing continuation lines)

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c:
	corrected commit. Occurrences of REISER4_DYNAMIC_PLUGINS removed.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/plugin.c, /home/CVS/reiser4/fs/reiser4/plugin/types.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_defs.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_i.h, /home/CVS/reiser4/fs/reiser4/reiser4_fs_sb.h:
	added reiser4_fs_*_.h files
	plugin/plugin.c:
	    find_plugin(): commented
	    Move audit plugin into file plugin type.
		Merged changes from plugin/base.c which is sheduled for removal.
		Improper comments about plugins not being addressed by array
		indices removed.
	plugin/types.h, plugin/plugin.c:
	Get rid of the rest of REISER4_DYNAMIC_PLUGINS.

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/ChangeLog: ChangeLog added

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

	* /home/CVS/reiser4/fs/reiser4/plugin/base.c:
	removed. Content is in plugin/plugin.c

	I accept terms and conditions stated in the Legal Agreement
	(available at http://www.namesys.com/legalese.html)

2001-08-16  Nikita Danilov  <Nikita@Namesys.COM>

	* plugin/types.h: super block plugins removed (use root directory
	as per Hans suggestion).

	* plugin/plugin.c: assertions labeled

	* plugin/base.c: bye-bye.

	* plugin/plugin.c (find_plugin): commented

	* plugin/types.h, plugin/plugin.c: 
	Get rid of the rest of REISER4_DYNAMIC_PLUGINS.

	* plugin/plugin.c: move audit plugin into file plugin type.
	Merged changes from plugin/base.c which is sheduled for removal.
	Improper comments about plugins not being addressed by array 
	indices removed.
	

